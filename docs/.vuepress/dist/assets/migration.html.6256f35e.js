import{f as o}from"./app.04f9bf74.js";import{_ as d}from"./plugin-vue_export-helper.21dcd24c.js";const e={},t=o('<h1 id="migrating-from-v0-x" tabindex="-1"><a class="header-anchor" href="#migrating-from-v0-x" aria-hidden="true">#</a> Migrating from v0.x</h1><p>As we want more developers to join us to contribute to go-doudou and read its source code more easily, we make some breaking changes.</p><ul><li><p>Separated CLI part and framework part to <code>cmd</code> package and <code>framework</code> package respectively</p></li><li><p>Moved all kinds of util packages to <code>toolkit</code> package</p></li><li><p>Loading dotenv files in <code>init</code> function from <code>github.com/unionj-cloud/go-doudou/framework/internal/config</code> package</p></li><li><p>Unexported built-in http middlewares like <code>Tracing</code>, <code>Metrics</code>, <code>Rest</code>, <code>Recovery</code> and <code>Logger</code>, and add them to <code>mux</code> along with third-party middlewares <code>handlers.CompressHandler</code>, <code>requestid.RequestIDHandler</code> and <code>handlers.ProxyHeaders</code> by default to support these features out-of-box. For flexibility, we also expose a new api <code>PreMiddleware</code> for inserting your custom middleware to the front of chain.</p></li></ul><p>You may also need to correct import paths to clear compile errors. Here is a table for your reference.</p><table><thead><tr><th>v0.x</th><th>v1.x</th></tr></thead><tbody><tr><td><code>github.com/unionj-cloud/go-doudou/svc/</code></td><td><code>github.com/unionj-cloud/go-doudou/framework/</code></td></tr><tr><td><code>github.com/unionj-cloud/go-doudou/svc/config</code></td><td>moved to <code>github.com/unionj-cloud/go-doudou/framework/internal/config</code> package, so it can&#39;t be imported to your project anymore.</td></tr><tr><td><code>ddconfig.InitEnv()</code></td><td>get rid of <code>ddconfig.InitEnv()</code> from <code>main</code> function</td></tr><tr><td><code>if ddconfig.GddMode.Load() == &quot;micro&quot; {</code></td><td><code>if os.Getenv(&quot;GDD_MODE&quot;) == &quot;micro&quot; {</code>. The name of environment variable <code>GDD_MODE</code> is arbitrary.</td></tr><tr><td><code>srv.AddMiddleware(ddhttp.Tracing, ddhttp.Metrics, requestid.RequestIDHandler, handlers.CompressHandler, handlers.ProxyHeaders, ddhttp.Logger, yourCustomMiddleware, ddhttp.Rest, ddhttp.Recover)</code></td><td><code>srv.AddMiddleware(yourCustomMiddleware)</code>. Get rid of <code>ddhttp.Tracing</code>, <code>ddhttp.Metrics</code>, <code>requestid.RequestIDHandler</code>, <code>handlers.CompressHandler</code>, <code>handlers.ProxyHeaders</code>, <code>ddhttp.Logger</code>, <code>ddhttp.Rest</code>, <code>ddhttp.Recover</code>. They have been already built-in go-doudou.</td></tr><tr><td><code>github.com/unionj-cloud/go-doudou/ddl/</code></td><td><code>github.com/unionj-cloud/go-doudou/toolkit/sqlext/</code></td></tr><tr><td><code>github.com/unionj-cloud/go-doudou/*utils</code></td><td><code>github.com/unionj-cloud/go-doudou/toolkit/*utils</code></td></tr><tr><td><code>github.com/unionj-cloud/go-doudou/cast</code></td><td><code>github.com/unionj-cloud/go-doudou/toolkit/cast</code></td></tr><tr><td><code>github.com/unionj-cloud/go-doudou/openapi/v3</code></td><td><code>github.com/unionj-cloud/go-doudou/toolkit/openapi/v3</code></td></tr><tr><td><code>github.com/unionj-cloud/go-doudou/copier</code></td><td><code>github.com/unionj-cloud/go-doudou/toolkit/copier</code></td></tr></tbody></table>',5);function c(r,i){return t}var n=d(e,[["render",c]]);export{n as default};
