<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/x-icon" sizes="32x32" href="/favicon.ico"><script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?658d535852e4dcdd8f3934c1c3e87165";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script><meta name="keywords" content="go-doudou,Go语言微服务框架,golang,go-doudou微服务框架,RESTful,微服务,服务注册与发现,负载均衡,熔断限流,grpc,去中心化,golang microservice framework,golang orm,ORM工具,microservice,service discovery,load balancing,circuit breaker,rate limit,低代码平台"><meta name="description" content="go-doudou是一个go语言微服务框架。它同时支持开发单体应用。从定义Go语言接口开始，无须学习任何接口描述语言。内置基于SWIM gossip协议的服务注册与发现的机制，帮助你构建一个健壮的、可扩展的、去中心化的微服务集群。内置强大的代码生成器。"><title>go-doudou CLI命令行工具详解 | go-doudou</title>
    <link rel="modulepreload" href="/assets/app.2025f35b.js"><link rel="modulepreload" href="/assets/cli-commands.html.49ec28ee.js"><link rel="modulepreload" href="/assets/cli-commands.html.a86a28b4.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.993d40d8.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/zh/" class=""><img class="logo" src="/logo.png" alt="go-doudou"><span class="site-name can-hide">go-doudou</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/zh/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/resources/" class="" aria-label="资源"><!--[--><!--]--> 资源 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/blog/" class="router-link-active" aria-label="博客"><!--[--><!--]--> 博客 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/contribution/" class="" aria-label="贡献"><!--[--><!--]--> 贡献 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/unionj-cloud/go-doudou/releases" rel="noopener noreferrer" target="_blank" aria-label="Release Notes"><!--[--><!--]--> Release Notes <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/cli-commands.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/blog/cli-commands.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/unionj-cloud/go-doudou" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换夜间模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/zh/guide/" class="" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/resources/" class="" aria-label="资源"><!--[--><!--]--> 资源 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/blog/" class="router-link-active" aria-label="博客"><!--[--><!--]--> 博客 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/contribution/" class="" aria-label="贡献"><!--[--><!--]--> 贡献 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/unionj-cloud/go-doudou/releases" rel="noopener noreferrer" target="_blank" aria-label="Release Notes"><!--[--><!--]--> Release Notes <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/cli-commands.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/blog/cli-commands.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/unionj-cloud/go-doudou" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">go-doudou CLI命令行工具详解 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#安装与升级" class="router-link-active router-link-exact-active sidebar-item" aria-label="安装与升级"><!--[--><!--]--> 安装与升级 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#安装go-doudou" class="router-link-active router-link-exact-active sidebar-item" aria-label="安装go-doudou"><!--[--><!--]--> 安装go-doudou <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#升级go-doudou" class="router-link-active router-link-exact-active sidebar-item" aria-label="升级go-doudou"><!--[--><!--]--> 升级go-doudou <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#命令概览" class="router-link-active router-link-exact-active sidebar-item" aria-label="命令概览"><!--[--><!--]--> 命令概览 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#completion命令详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="completion命令详解"><!--[--><!--]--> completion命令详解 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法" class="router-link-active router-link-exact-active sidebar-item" aria-label="基本用法"><!--[--><!--]--> 基本用法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#子命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="子命令"><!--[--><!--]--> 子命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#示例" class="router-link-active router-link-exact-active sidebar-item" aria-label="示例"><!--[--><!--]--> 示例 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc命令详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc命令详解"><!--[--><!--]--> svc命令详解 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-init" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc init"><!--[--><!--]--> svc init <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-http" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc http"><!--[--><!--]--> svc http <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-http-client" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc http client"><!--[--><!--]--> svc http client <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-http-test" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc http test"><!--[--><!--]--> svc http test <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-grpc" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc grpc"><!--[--><!--]--> svc grpc <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-crud" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc crud"><!--[--><!--]--> svc crud <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-run" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc run"><!--[--><!--]--> svc run <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-push" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc push"><!--[--><!--]--> svc push <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-deploy" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc deploy"><!--[--><!--]--> svc deploy <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-shutdown" class="router-link-active router-link-exact-active sidebar-item" aria-label="svc shutdown"><!--[--><!--]--> svc shutdown <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#name命令详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="name命令详解"><!--[--><!--]--> name命令详解 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法-11" class="router-link-active router-link-exact-active sidebar-item" aria-label="基本用法"><!--[--><!--]--> 基本用法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#常用参数-10" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用参数"><!--[--><!--]--> 常用参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#示例-11" class="router-link-active router-link-exact-active sidebar-item" aria-label="示例"><!--[--><!--]--> 示例 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#enum命令详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="enum命令详解"><!--[--><!--]--> enum命令详解 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法-12" class="router-link-active router-link-exact-active sidebar-item" aria-label="基本用法"><!--[--><!--]--> 基本用法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#常用参数-11" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用参数"><!--[--><!--]--> 常用参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#示例-12" class="router-link-active router-link-exact-active sidebar-item" aria-label="示例"><!--[--><!--]--> 示例 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#version命令详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="version命令详解"><!--[--><!--]--> version命令详解 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法-13" class="router-link-active router-link-exact-active sidebar-item" aria-label="基本用法"><!--[--><!--]--> 基本用法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#示例-13" class="router-link-active router-link-exact-active sidebar-item" aria-label="示例"><!--[--><!--]--> 示例 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#work命令详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="work命令详解"><!--[--><!--]--> work命令详解 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法-14" class="router-link-active router-link-exact-active sidebar-item" aria-label="基本用法"><!--[--><!--]--> 基本用法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#子命令-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="子命令"><!--[--><!--]--> 子命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#work-init" class="router-link-active router-link-exact-active sidebar-item" aria-label="work init"><!--[--><!--]--> work init <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#实际应用示例" class="router-link-active router-link-exact-active sidebar-item" aria-label="实际应用示例"><!--[--><!--]--> 实际应用示例 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#_1-微服务初始化与开发流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 微服务初始化与开发流程"><!--[--><!--]--> 1. 微服务初始化与开发流程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_2-基于数据库表的微服务生成" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 基于数据库表的微服务生成"><!--[--><!--]--> 2. 基于数据库表的微服务生成 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_3-使用crud命令从现有数据库生成crud服务" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 使用crud命令从现有数据库生成CRUD服务"><!--[--><!--]--> 3. 使用crud命令从现有数据库生成CRUD服务 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_4-工作区中的模块化应用开发" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 工作区中的模块化应用开发"><!--[--><!--]--> 4. 工作区中的模块化应用开发 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_5-实现枚举类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. 实现枚举类型"><!--[--><!--]--> 5. 实现枚举类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_6-生成自动完成脚本" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. 生成自动完成脚本"><!--[--><!--]--> 6. 生成自动完成脚本 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#高级用法与技巧" class="router-link-active router-link-exact-active sidebar-item" aria-label="高级用法与技巧"><!--[--><!--]--> 高级用法与技巧 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/blog/cli-commands.html#_1-使用注解控制接口权限" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 使用注解控制接口权限"><!--[--><!--]--> 1. 使用注解控制接口权限 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_2-自定义protoc命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 自定义protoc命令"><!--[--><!--]--> 2. 自定义protoc命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_3-配置环境变量影响服务行为" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 配置环境变量影响服务行为"><!--[--><!--]--> 3. 配置环境变量影响服务行为 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_4-集成测试技巧" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 集成测试技巧"><!--[--><!--]--> 4. 集成测试技巧 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_5-模块化应用开发技巧" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. 模块化应用开发技巧"><!--[--><!--]--> 5. 模块化应用开发技巧 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="go-doudou-cli命令行工具详解" tabindex="-1"><a class="header-anchor" href="#go-doudou-cli命令行工具详解" aria-hidden="true">#</a> go-doudou CLI命令行工具详解</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#安装与升级" class="router-link-active router-link-exact-active">安装与升级</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#安装go-doudou" class="router-link-active router-link-exact-active">安装go-doudou</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#升级go-doudou" class="router-link-active router-link-exact-active">升级go-doudou</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#命令概览" class="router-link-active router-link-exact-active">命令概览</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#completion命令详解" class="router-link-active router-link-exact-active">completion命令详解</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法" class="router-link-active router-link-exact-active">基本用法</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#子命令" class="router-link-active router-link-exact-active">子命令</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#示例" class="router-link-active router-link-exact-active">示例</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc命令详解" class="router-link-active router-link-exact-active">svc命令详解</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-init" class="router-link-active router-link-exact-active">svc init</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-http" class="router-link-active router-link-exact-active">svc http</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-http-client" class="router-link-active router-link-exact-active">svc http client</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-http-test" class="router-link-active router-link-exact-active">svc http test</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-grpc" class="router-link-active router-link-exact-active">svc grpc</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-crud" class="router-link-active router-link-exact-active">svc crud</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-run" class="router-link-active router-link-exact-active">svc run</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-push" class="router-link-active router-link-exact-active">svc push</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-deploy" class="router-link-active router-link-exact-active">svc deploy</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#svc-shutdown" class="router-link-active router-link-exact-active">svc shutdown</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#name命令详解" class="router-link-active router-link-exact-active">name命令详解</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法-11" class="router-link-active router-link-exact-active">基本用法</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#常用参数-10" class="router-link-active router-link-exact-active">常用参数</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#示例-11" class="router-link-active router-link-exact-active">示例</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#enum命令详解" class="router-link-active router-link-exact-active">enum命令详解</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法-12" class="router-link-active router-link-exact-active">基本用法</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#常用参数-11" class="router-link-active router-link-exact-active">常用参数</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#示例-12" class="router-link-active router-link-exact-active">示例</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#version命令详解" class="router-link-active router-link-exact-active">version命令详解</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法-13" class="router-link-active router-link-exact-active">基本用法</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#示例-13" class="router-link-active router-link-exact-active">示例</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#work命令详解" class="router-link-active router-link-exact-active">work命令详解</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#基本用法-14" class="router-link-active router-link-exact-active">基本用法</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#子命令-1" class="router-link-active router-link-exact-active">子命令</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#work-init" class="router-link-active router-link-exact-active">work init</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#实际应用示例" class="router-link-active router-link-exact-active">实际应用示例</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#_1-微服务初始化与开发流程" class="router-link-active router-link-exact-active">1. 微服务初始化与开发流程</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_2-基于数据库表的微服务生成" class="router-link-active router-link-exact-active">2. 基于数据库表的微服务生成</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_3-使用crud命令从现有数据库生成crud服务" class="router-link-active router-link-exact-active">3. 使用crud命令从现有数据库生成CRUD服务</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_4-工作区中的模块化应用开发" class="router-link-active router-link-exact-active">4. 工作区中的模块化应用开发</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_5-实现枚举类型" class="router-link-active router-link-exact-active">5. 实现枚举类型</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_6-生成自动完成脚本" class="router-link-active router-link-exact-active">6. 生成自动完成脚本</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#高级用法与技巧" class="router-link-active router-link-exact-active">高级用法与技巧</a><ul><li><a aria-current="page" href="/zh/blog/cli-commands.html#_1-使用注解控制接口权限" class="router-link-active router-link-exact-active">1. 使用注解控制接口权限</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_2-自定义protoc命令" class="router-link-active router-link-exact-active">2. 自定义protoc命令</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_3-配置环境变量影响服务行为" class="router-link-active router-link-exact-active">3. 配置环境变量影响服务行为</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_4-集成测试技巧" class="router-link-active router-link-exact-active">4. 集成测试技巧</a></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#_5-模块化应用开发技巧" class="router-link-active router-link-exact-active">5. 模块化应用开发技巧</a></li></ul></li><li><a aria-current="page" href="/zh/blog/cli-commands.html#总结" class="router-link-active router-link-exact-active">总结</a></li></ul></nav><p><img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&amp;w=1740&amp;fm=jpg&amp;fit=crop" alt="programming.jpg"> Photo by <a href="https://unsplash.com/@cgower?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener noreferrer">Christopher Gower<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a> on <a href="https://unsplash.com/photos/m_HRfLhgABo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener noreferrer">Unsplash<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>go-doudou是一个强大的Go语言微服务开发框架，它提供了丰富的命令行工具，帮助开发者快速构建、部署和管理微服务。本文将详细介绍go-doudou CLI工具的各种命令和子命令的用法，并结合实际案例进行说明。</p><h2 id="安装与升级" tabindex="-1"><a class="header-anchor" href="#安装与升级" aria-hidden="true">#</a> 安装与升级</h2><h3 id="安装go-doudou" tabindex="-1"><a class="header-anchor" href="#安装go-doudou" aria-hidden="true">#</a> 安装go-doudou</h3><p>如果Go版本低于1.17：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go get -v github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>如果Go版本 &gt;= 1.17，推荐采用如下命令全局安装<code>go-doudou</code>命令行工具：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go install -v github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>推荐采用如下命令下载go-doudou作为项目的依赖：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go get -v -d github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>如果遇到<code>410 Gone error</code>报错，请先执行如下命令，再执行上述的安装命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> GOSUMDB=off</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div><h3 id="升级go-doudou" tabindex="-1"><a class="header-anchor" href="#升级go-doudou" aria-hidden="true">#</a> 升级go-doudou</h3><p>执行<code>go-doudou version</code>命令可以升级全局安装的go-doudou命令行工具：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou version</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>如果检测到有新版本，会提示是否升级，选择&quot;Yes&quot;后会自动安装最新版本。</p><h2 id="命令概览" tabindex="-1"><a class="header-anchor" href="#命令概览" aria-hidden="true">#</a> 命令概览</h2><p>go-doudou命令行工具的基本用法如下：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou [flags]</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou [command]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>主要命令包括：</p><ul><li><code>svc</code>: 生成或更新服务 <ul><li><code>init</code>: 初始化新项目</li><li><code>http</code>: 生成HTTP路由和处理程序 <ul><li><code>client</code>: 生成HTTP客户端代码</li><li><code>test</code>: 生成集成测试代码</li></ul></li><li><code>grpc</code>: 生成gRPC服务代码</li><li><code>crud</code>: 从数据库生成通用CRUD代码</li><li><code>run</code>: 运行服务</li><li><code>push</code>: 构建Docker镜像并推送</li><li><code>deploy</code>: 将服务部署到Kubernetes</li><li><code>shutdown</code>: 关闭已部署的服务</li></ul></li><li><code>completion</code>: 为指定的shell生成自动完成脚本</li><li><code>ddl</code>: 数据库表结构与Go结构体之间的迁移工具</li><li><code>enum</code>: 为常量生成枚举接口实现函数</li><li><code>name</code>: 批量添加或更新结构体字段的JSON标签</li><li><code>version</code>: 显示go-doudou的版本号</li><li><code>work</code>: 构建模块化应用</li></ul><div class="custom-container warning"><p class="custom-container-title">注意</p><p>虽然在帮助信息中可能仍能看到 <code>ddl</code> 命令，但该命令已被废弃，不建议在新项目中使用。请使用 <code>svc crud</code> 命令代替。</p></div><p>可以通过<code>go-doudou -h</code>查看帮助信息：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou -h</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>输出示例：</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou works like a scaffolding tool but more than that. 
it lets api providers design their apis and help them code less. 
it generates openapi 3.0 spec json document for frontend developers or other api consumers to understand what apis there, 
consumers can import it into postman to debug and test, or upload it into some code generators to download client sdk.
it provides some useful components and middleware for constructing microservice cluster like service register and discovering, 
load balancing and so on. it just begins, more features will come out soon.

Usage:
  go-doudou [flags]
  go-doudou [command]

Available Commands:
  completion  Generate the autocompletion script for the specified shell
  enum        Generate functions for constants to implement IEnum interface
  help        Help about any command
  name        bulk add or update json tag of struct fields
  svc         generate or update service
  version     Print the version number of go-doudou
  work        Build modular application

Flags:
  -h, --help      help for go-doudou
  -v, --version   version for go-doudou
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="completion命令详解" tabindex="-1"><a class="header-anchor" href="#completion命令详解" aria-hidden="true">#</a> completion命令详解</h2><p><code>completion</code>命令用于为指定的shell生成自动完成脚本，提高go-doudou命令行的使用效率。</p><h3 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法" aria-hidden="true">#</a> 基本用法</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou completion [command]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="子命令" tabindex="-1"><a class="header-anchor" href="#子命令" aria-hidden="true">#</a> 子命令</h3><ul><li><code>bash</code>: 为bash生成自动完成脚本</li><li><code>fish</code>: 为fish生成自动完成脚本</li><li><code>powershell</code>: 为powershell生成自动完成脚本</li><li><code>zsh</code>: 为zsh生成自动完成脚本</li></ul><h3 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h3><p>生成bash自动完成脚本：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou completion bash &gt; ~/.bash_completion</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>生成zsh自动完成脚本：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou completion zsh &gt; ~/.zsh_completion</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="svc命令详解" tabindex="-1"><a class="header-anchor" href="#svc命令详解" aria-hidden="true">#</a> svc命令详解</h2><p><code>svc</code>是go-doudou命令行工具中最常用的命令，用于生成或更新服务相关的代码。它包含多个子命令：</p><h3 id="svc-init" tabindex="-1"><a class="header-anchor" href="#svc-init" aria-hidden="true">#</a> svc init</h3><p><code>svc init</code>命令用于初始化一个新的go-doudou微服务项目。</p><h4 id="基本用法-1" tabindex="-1"><a class="header-anchor" href="#基本用法-1" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc init [dir] [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>其中<code>[dir]</code>是要初始化的项目目录名称。</p><h4 id="常用参数" tabindex="-1"><a class="header-anchor" href="#常用参数" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>-m, --mod</code>: 模块名称</li><li><code>--module</code>: 是否初始化为模块化应用的组件（布尔值）。当设置为<code>true</code>时，go-doudou会自动调用<code>go work use</code>将该组件添加到工作区中。</li><li><code>-f, --file</code>: OpenAPI 3.0或Swagger 2.0规范的JSON文件路径或下载链接</li><li><code>--case</code>: protobuf消息字段和JSON标签命名规则，支持&quot;lowerCamel&quot;和&quot;snake&quot;（默认&quot;lowerCamel&quot;）</li><li><code>-t, --type</code>: 指定项目类型，值可以是&quot;grpc&quot;或&quot;rest&quot;（默认&quot;grpc&quot;）</li><li><code>--grpc_gen_cmd</code>: 用于生成gRPC服务和消息代码的命令（默认使用protoc命令）</li></ul><h4 id="示例-1" tabindex="-1"><a class="header-anchor" href="#示例-1" aria-hidden="true">#</a> 示例</h4><p>基本初始化：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc init myservice -m github.com/myorg/myservice</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>使用MySQL数据库初始化并生成gRPC代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc init myservice --db_driver mysql --db_dsn </span><span style="color:#CE9178;">&quot;root:password@tcp(localhost:3306)/mydb?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span><span style="color:#D4D4D4;"> --db_soft deleted_at --db_grpc</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>初始化为模块化应用的组件：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc init component-c -m my-workspace/component-c --module</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>当使用<code>--module</code>标志时，go-doudou会自动执行以下操作：</p><ol><li>创建必要的项目结构</li><li>自动调用<code>go work use</code>将新创建的组件添加到工作区</li><li>为模块化应用生成插件和入口代码</li><li>更新主应用的导入语句，自动引入新组件的插件</li></ol><h3 id="svc-http" tabindex="-1"><a class="header-anchor" href="#svc-http" aria-hidden="true">#</a> svc http</h3><p><code>svc http</code>命令用于生成HTTP路由和处理程序。</p><h4 id="基本用法-2" tabindex="-1"><a class="header-anchor" href="#基本用法-2" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-1" tabindex="-1"><a class="header-anchor" href="#常用参数-1" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>--handler</code>: 是否生成默认处理程序实现（布尔值）</li><li><code>-c, --client</code>: 是否生成默认的Go HTTP客户端代码（布尔值）</li><li><code>-o, --omitempty</code>: 是否在生成的匿名结构体中的JSON标签中添加<code>omitempty</code>（布尔值）</li><li><code>--case</code>: 应用于生成的处理程序中匿名结构体字段的JSON标签命名规则，可选值为&quot;lowerCamel&quot;或&quot;snake&quot;（默认&quot;lowerCamel&quot;）</li><li><code>--doc</code>: 是否生成OpenAPI 3.0 JSON文档（布尔值）</li><li><code>-e, --env</code>: 基础URL环境变量名称</li><li><code>-r, --routePattern</code>: 路由模式生成策略，0表示将服务接口的每个方法按斜杠/拆分（转为snake_case后），1表示不拆分，只转小写</li><li><code>--allowGetWithReqBody</code>: 是否允许GET请求带有请求体（布尔值）</li></ul><h4 id="示例-2" tabindex="-1"><a class="header-anchor" href="#示例-2" aria-hidden="true">#</a> 示例</h4><p>生成HTTP路由和客户端代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http -c</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>生成HTTP路由、处理程序和OpenAPI文档：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http --handler --doc</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="svc-http-client" tabindex="-1"><a class="header-anchor" href="#svc-http-client" aria-hidden="true">#</a> svc http client</h3><p><code>svc http client</code>是<code>svc http</code>的子命令，用于从OpenAPI 3.0规范JSON文件生成HTTP客户端代码。</p><h4 id="基本用法-3" tabindex="-1"><a class="header-anchor" href="#基本用法-3" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http client [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-2" tabindex="-1"><a class="header-anchor" href="#常用参数-2" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>-f, --file</code>: OpenAPI 3.0或Swagger 2.0规范的JSON文件路径或下载链接</li><li><code>-e, --env</code>: 基础URL环境变量名称</li><li><code>-p, --pkg</code>: 客户端包名称（默认&quot;client&quot;）</li><li><code>-o, --omit</code>: 是否在JSON标签中添加<code>omitempty</code>（布尔值）</li></ul><h4 id="示例-3" tabindex="-1"><a class="header-anchor" href="#示例-3" aria-hidden="true">#</a> 示例</h4><p>从OpenAPI文档生成客户端代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http client -f ./api-docs.json -e BASE_URL -p client</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="svc-http-test" tabindex="-1"><a class="header-anchor" href="#svc-http-test" aria-hidden="true">#</a> svc http test</h3><p><code>svc http test</code>是<code>svc http</code>的子命令，用于从Postman Collection文件生成集成测试代码。</p><h4 id="基本用法-4" tabindex="-1"><a class="header-anchor" href="#基本用法-4" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http </span><span style="color:#DCDCAA;">test</span><span style="color:#D4D4D4;"> [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-3" tabindex="-1"><a class="header-anchor" href="#常用参数-3" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>--collection</code>: Postman Collection v2.1兼容文件路径</li><li><code>--dotenv</code>: 仅用于集成测试的dotenv格式配置文件路径</li></ul><h4 id="示例-4" tabindex="-1"><a class="header-anchor" href="#示例-4" aria-hidden="true">#</a> 示例</h4><p>从Postman Collection生成测试代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http </span><span style="color:#DCDCAA;">test</span><span style="color:#D4D4D4;"> --collection ./postman_collection.json --dotenv ./.env.test</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="svc-grpc" tabindex="-1"><a class="header-anchor" href="#svc-grpc" aria-hidden="true">#</a> svc grpc</h3><p><code>svc grpc</code>命令用于生成gRPC服务代码。</p><h4 id="基本用法-5" tabindex="-1"><a class="header-anchor" href="#基本用法-5" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc grpc [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-4" tabindex="-1"><a class="header-anchor" href="#常用参数-4" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>-o, --omitempty</code>: 是否在生成的匿名结构体中的JSON标签中添加<code>omitempty</code>（布尔值）</li><li><code>--case</code>: protobuf消息字段命名策略，支持&quot;lowerCamel&quot;和&quot;snake&quot;（默认&quot;lowerCamel&quot;）</li><li><code>--grpc_gen_cmd</code>: 用于生成gRPC服务和消息代码的命令（默认使用protoc命令）</li><li><code>--http2grpc</code>: 是否为gRPC服务生成RESTful API（布尔值）</li><li><code>--allow_get_body</code>: 是否允许GET请求带有请求体（布尔值）</li><li><code>--annotated_only</code>: 是否只为带有@grpc注解的方法生成gRPC API（布尔值）</li></ul><h4 id="示例-5" tabindex="-1"><a class="header-anchor" href="#示例-5" aria-hidden="true">#</a> 示例</h4><p>生成基本的gRPC服务代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc grpc</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>生成gRPC服务代码并提供RESTful API代理：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc grpc --http2grpc</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>生成只包含带有@grpc注解方法的gRPC服务代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc grpc --annotated_only</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="svc-crud" tabindex="-1"><a class="header-anchor" href="#svc-crud" aria-hidden="true">#</a> svc crud</h3><p><code>svc crud</code>命令用于从数据库生成通用的CRUD代码。这个命令是替代已废弃的<code>ddl</code>命令的推荐选择。</p><h4 id="基本用法-6" tabindex="-1"><a class="header-anchor" href="#基本用法-6" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc crud [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-5" tabindex="-1"><a class="header-anchor" href="#常用参数-5" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>--db_orm</code>: 指定ORM，目前仅支持gorm（默认&quot;gorm&quot;）</li><li><code>--db_driver</code>: 数据库驱动类型，选项有&quot;mysql&quot;、&quot;postgres&quot;、&quot;sqlite&quot;、&quot;sqlserver&quot;、&quot;tidb&quot;</li><li><code>--db_dsn</code>: 数据库连接URL</li><li><code>--db_soft</code>: 数据库软删除列名（默认&quot;deleted_at&quot;）</li><li><code>--db_service</code>: 生成gRPC或REST服务，接受值：grpc或rest</li><li><code>--db_gen_gen</code>: 是否生成gen.go文件（布尔值）</li><li><code>--db_table_prefix</code>: 表前缀或PostgreSQL的schema名称</li><li><code>--db_table_glob</code>: 用于过滤glob匹配的表</li><li><code>--db_table_exclude_glob</code>: 用于排除glob匹配的表</li><li><code>--case</code>: protobuf消息字段和JSON标签命名规则，支持&quot;lowerCamel&quot;和&quot;snake&quot;（默认&quot;lowerCamel&quot;）</li><li><code>--db_type_mapping</code>: 指定自定义的列类型到Go类型的映射</li><li><code>--db_omitempty</code>: 是否在生成的模型字段的JSON标签中添加<code>omitempty</code>（布尔值）</li><li><code>--grpc_gen_cmd</code>: 用于生成gRPC服务和消息代码的命令（默认使用protoc命令）</li></ul><h4 id="示例-6" tabindex="-1"><a class="header-anchor" href="#示例-6" aria-hidden="true">#</a> 示例</h4><p>从MySQL数据库生成CRUD代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc crud --db_driver mysql --db_dsn </span><span style="color:#CE9178;">&quot;root:password@tcp(localhost:3306)/mydb?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span><span style="color:#D4D4D4;"> --db_soft deleted_at --db_service rest</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>从PostgreSQL数据库生成CRUD代码，并指定schema：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc crud --db_driver postgres --db_dsn </span><span style="color:#CE9178;">&quot;host=localhost user=postgres password=postgres dbname=mydb port=5432 sslmode=disable&quot;</span><span style="color:#D4D4D4;"> --db_table_prefix public --db_service grpc</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>仅生成特定表的CRUD代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc crud --db_driver mysql --db_dsn </span><span style="color:#CE9178;">&quot;root:password@tcp(localhost:3306)/mydb&quot;</span><span style="color:#D4D4D4;"> --db_table_glob </span><span style="color:#CE9178;">&quot;user_*&quot;</span><span style="color:#D4D4D4;"> --db_service rest</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="svc-run" tabindex="-1"><a class="header-anchor" href="#svc-run" aria-hidden="true">#</a> svc run</h3><p><code>svc run</code>命令用于运行go-doudou服务。</p><h4 id="基本用法-7" tabindex="-1"><a class="header-anchor" href="#基本用法-7" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc run [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-6" tabindex="-1"><a class="header-anchor" href="#常用参数-6" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>-w, --watch</code>: 启用监视模式，文件变更时自动重启服务（布尔值）</li></ul><h4 id="示例-7" tabindex="-1"><a class="header-anchor" href="#示例-7" aria-hidden="true">#</a> 示例</h4><p>启动服务：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc run</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>启用监视模式启动服务：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc run -w</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="svc-push" tabindex="-1"><a class="header-anchor" href="#svc-push" aria-hidden="true">#</a> svc push</h3><p><code>svc push</code>命令用于构建Docker镜像并推送到镜像仓库，同时生成或更新K8s部署YAML文件。</p><h4 id="基本用法-8" tabindex="-1"><a class="header-anchor" href="#基本用法-8" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc push [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-7" tabindex="-1"><a class="header-anchor" href="#常用参数-7" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>-r, --repo</code>: 私有Docker镜像仓库</li><li><code>--pre</code>: 用于构建和推送Docker镜像的镜像名称前缀</li><li><code>--ver</code>: Docker镜像版本</li></ul><h4 id="示例-8" tabindex="-1"><a class="header-anchor" href="#示例-8" aria-hidden="true">#</a> 示例</h4><p>构建镜像并推送到私有仓库：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc push -r myregistry.com/myuser</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>指定版本标签构建镜像：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc push -r myregistry.com/myuser --ver v1.0.0</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="svc-deploy" tabindex="-1"><a class="header-anchor" href="#svc-deploy" aria-hidden="true">#</a> svc deploy</h3><p><code>svc deploy</code>命令包装kubectl apply命令，用于将服务部署到Kubernetes集群。</p><h4 id="基本用法-9" tabindex="-1"><a class="header-anchor" href="#基本用法-9" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc deploy [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-8" tabindex="-1"><a class="header-anchor" href="#常用参数-8" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>-k, --k8sfile</code>: 用于部署服务的Kubernetes YAML文件</li></ul><h4 id="示例-9" tabindex="-1"><a class="header-anchor" href="#示例-9" aria-hidden="true">#</a> 示例</h4><p>使用默认配置部署服务：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc deploy</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>使用指定的Kubernetes配置文件部署服务：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc deploy -k myservice_deployment.yaml</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="svc-shutdown" tabindex="-1"><a class="header-anchor" href="#svc-shutdown" aria-hidden="true">#</a> svc shutdown</h3><p><code>svc shutdown</code>命令包装kubectl delete命令，用于关闭已部署的服务。</p><h4 id="基本用法-10" tabindex="-1"><a class="header-anchor" href="#基本用法-10" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc shutdown [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="常用参数-9" tabindex="-1"><a class="header-anchor" href="#常用参数-9" aria-hidden="true">#</a> 常用参数</h4><ul><li><code>-k, --k8sfile</code>: 用于部署服务的Kubernetes YAML文件</li></ul><h4 id="示例-10" tabindex="-1"><a class="header-anchor" href="#示例-10" aria-hidden="true">#</a> 示例</h4><p>关闭默认部署的服务：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc shutdown</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>使用指定的Kubernetes配置文件关闭服务：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc shutdown -k myservice_deployment.yaml</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="name命令详解" tabindex="-1"><a class="header-anchor" href="#name命令详解" aria-hidden="true">#</a> name命令详解</h2><p><code>name</code>命令用于批量添加或更新结构体字段的JSON标签。</p><h3 id="基本用法-11" tabindex="-1"><a class="header-anchor" href="#基本用法-11" aria-hidden="true">#</a> 基本用法</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou name [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="常用参数-10" tabindex="-1"><a class="header-anchor" href="#常用参数-10" aria-hidden="true">#</a> 常用参数</h3><ul><li><code>-f, --file</code>: Go源文件路径</li><li><code>-c, --case</code>: JSON标签命名规则，支持&quot;lowerCamel&quot;、&quot;snake&quot;等（默认&quot;lowerCamel&quot;）</li><li><code>-s, --strategy</code>: 命名策略名称，当前仅支持&quot;lowerCamel&quot;和&quot;snake&quot;（默认&quot;lowerCamel&quot;）</li><li><code>-o, --omitempty</code>: 是否添加<code>omitempty</code>标记（布尔值）</li><li><code>--form</code>: 是否为<a href="https://github.com/go-playground/form" target="_blank" rel="noopener noreferrer">github.com/go-playground/form<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>添加form标签</li></ul><h3 id="示例-11" tabindex="-1"><a class="header-anchor" href="#示例-11" aria-hidden="true">#</a> 示例</h3><p>为User结构体的字段添加snake_case形式的JSON标签：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou name -f ./model/user.go -c snake -o</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>同时生成JSON和form标签：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou name -f ./model/user.go -c lowerCamel -o --form</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="enum命令详解" tabindex="-1"><a class="header-anchor" href="#enum命令详解" aria-hidden="true">#</a> enum命令详解</h2><p><code>enum</code>命令用于为常量生成实现<code>IEnum</code>接口的函数。这对于在Go中使用枚举类型非常有用。</p><h3 id="基本用法-12" tabindex="-1"><a class="header-anchor" href="#基本用法-12" aria-hidden="true">#</a> 基本用法</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou enum [flags]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="常用参数-11" tabindex="-1"><a class="header-anchor" href="#常用参数-11" aria-hidden="true">#</a> 常用参数</h3><ul><li><code>-f, --file</code>: Go源文件的绝对路径</li></ul><h3 id="示例-12" tabindex="-1"><a class="header-anchor" href="#示例-12" aria-hidden="true">#</a> 示例</h3><p>为包含常量定义的文件生成枚举接口实现：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou enum -f ./enum/status.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>生成的代码示例（假设status.go中定义了Status类型的常量）：</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">// 原始文件</span></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Status</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">int</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">    StatusPending </span><span style="color:#9CDCFE;">Status</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">iota</span></span>
<span class="line"><span style="color:#D4D4D4;">    StatusActive</span></span>
<span class="line"><span style="color:#D4D4D4;">    StatusInactive</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">// 生成的函数</span></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (s *Status) </span><span style="color:#DCDCAA;">StringSetter</span><span style="color:#D4D4D4;">(value </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">switch</span><span style="color:#D4D4D4;"> value {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">case</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;StatusPending&quot;</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        *</span><span style="color:#9CDCFE;">s</span><span style="color:#D4D4D4;"> = StatusPending</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">case</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;StatusActive&quot;</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        *</span><span style="color:#9CDCFE;">s</span><span style="color:#D4D4D4;"> = StatusActive</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">case</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;StatusInactive&quot;</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        *</span><span style="color:#9CDCFE;">s</span><span style="color:#D4D4D4;"> = StatusInactive</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        *</span><span style="color:#9CDCFE;">s</span><span style="color:#D4D4D4;"> = StatusPending</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (s *Status) </span><span style="color:#DCDCAA;">StringGetter</span><span style="color:#D4D4D4;">() </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">switch</span><span style="color:#D4D4D4;"> *s {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">case</span><span style="color:#D4D4D4;"> StatusPending:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;StatusPending&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">case</span><span style="color:#D4D4D4;"> StatusActive:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;StatusActive&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">case</span><span style="color:#D4D4D4;"> StatusInactive:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;StatusInactive&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;StatusPending&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="version命令详解" tabindex="-1"><a class="header-anchor" href="#version命令详解" aria-hidden="true">#</a> version命令详解</h2><p><code>version</code>命令用于显示go-doudou的版本号，并检查是否有新版本可用。</p><h3 id="基本用法-13" tabindex="-1"><a class="header-anchor" href="#基本用法-13" aria-hidden="true">#</a> 基本用法</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou version</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="示例-13" tabindex="-1"><a class="header-anchor" href="#示例-13" aria-hidden="true">#</a> 示例</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou version</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>输出示例：</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou version v2.5.8
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>如果检测到有更新版本，会提示是否升级：</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">A new version is available: v2.5.9
Do you want to upgrade? [Y/n]
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="work命令详解" tabindex="-1"><a class="header-anchor" href="#work命令详解" aria-hidden="true">#</a> work命令详解</h2><p><code>work</code>命令用于构建模块化应用程序，它会创建一个带有工作区和主入口模块的项目结构。</p><h3 id="基本用法-14" tabindex="-1"><a class="header-anchor" href="#基本用法-14" aria-hidden="true">#</a> 基本用法</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou work [flags]</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou work [command]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="子命令-1" tabindex="-1"><a class="header-anchor" href="#子命令-1" aria-hidden="true">#</a> 子命令</h3><ul><li><code>init</code>: 初始化工作区文件夹</li></ul><h3 id="work-init" tabindex="-1"><a class="header-anchor" href="#work-init" aria-hidden="true">#</a> work init</h3><p><code>work init</code>命令用于初始化一个工作区文件夹，用于开发模块化应用。</p><h4 id="基本用法-15" tabindex="-1"><a class="header-anchor" href="#基本用法-15" aria-hidden="true">#</a> 基本用法</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou work init [dir]</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>其中<code>[dir]</code>是要初始化的工作区目录路径。如果不指定，则使用当前目录。</p><h4 id="工作区结构" tabindex="-1"><a class="header-anchor" href="#工作区结构" aria-hidden="true">#</a> 工作区结构</h4><p>执行<code>work init</code>命令后，go-doudou会创建如下的工作区结构：</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">workspace/              # 工作区根目录
├── go.work             # Go工作区文件，自动包含main模块和其他组件
└── main/               # 主入口模块目录
    ├── go.mod          # 主模块的go.mod文件
    ├── .env            # 环境变量配置文件
    └── cmd/            # 命令目录
        └── main.go     # 主入口文件，负责加载和运行所有组件
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>当使用 <code>svc init --module</code> 添加组件时，go-doudou会自动调用 <code>go work use</code> 命令将新组件添加到工作区，并自动更新 <code>main/cmd/main.go</code> 文件以导入新组件的插件。</p><h4 id="示例-14" tabindex="-1"><a class="header-anchor" href="#示例-14" aria-hidden="true">#</a> 示例</h4><p>初始化当前目录作为工作区：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou work init</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>指定目录作为工作区：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou work init ./my-workspace</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="实际应用示例" tabindex="-1"><a class="header-anchor" href="#实际应用示例" aria-hidden="true">#</a> 实际应用示例</h2><h3 id="_1-微服务初始化与开发流程" tabindex="-1"><a class="header-anchor" href="#_1-微服务初始化与开发流程" aria-hidden="true">#</a> 1. 微服务初始化与开发流程</h3><p>下面是一个完整的微服务开发流程：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 步骤1: 初始化项目</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc init myservice -m github.com/myorg/myservice</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤2: 编辑svc.go文件，定义服务接口</span></span>
<span class="line"><span style="color:#6A9955;"># 在myservice/svc.go中定义服务接口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤3: 生成HTTP和gRPC服务代码</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> myservice</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc http -c --doc</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc grpc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤4: 实现业务逻辑</span></span>
<span class="line"><span style="color:#6A9955;"># 编辑svcimpl.go文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤5: 运行服务</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc run</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤6: 构建镜像并部署</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc push -r myregistry.com/myuser</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc deploy</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_2-基于数据库表的微服务生成" tabindex="-1"><a class="header-anchor" href="#_2-基于数据库表的微服务生成" aria-hidden="true">#</a> 2. 基于数据库表的微服务生成</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 步骤1: 初始化带数据库支持的项目</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc init dbservice -m github.com/myorg/dbservice --db_driver mysql --db_dsn </span><span style="color:#CE9178;">&quot;root:password@tcp(localhost:3306)/mydb?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span><span style="color:#D4D4D4;"> --db_soft deleted_at --db_grpc --db_rest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤2: 运行服务</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> dbservice</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc run</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-使用crud命令从现有数据库生成crud服务" tabindex="-1"><a class="header-anchor" href="#_3-使用crud命令从现有数据库生成crud服务" aria-hidden="true">#</a> 3. 使用crud命令从现有数据库生成CRUD服务</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 步骤1: 在现有项目目录中运行命令</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> myproject</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc crud --db_driver postgres --db_dsn </span><span style="color:#CE9178;">&quot;host=localhost user=postgres password=postgres dbname=mydb&quot;</span><span style="color:#D4D4D4;"> --db_service rest --db_soft deleted_at</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤2: 运行生成的服务</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc run</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-工作区中的模块化应用开发" tabindex="-1"><a class="header-anchor" href="#_4-工作区中的模块化应用开发" aria-hidden="true">#</a> 4. 工作区中的模块化应用开发</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 步骤1: 初始化工作区</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou work init my-workspace</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> my-workspace</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤2: 初始化模块化组件</span></span>
<span class="line"><span style="color:#6A9955;"># go-doudou会自动执行&quot;go work use&quot;将组件添加到工作区</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc init component-a -m my-workspace/component-a --module</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc init component-b -m my-workspace/component-b --module</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤3: 在每个组件中定义服务接口并生成代码</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> component-a</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc http -c</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc grpc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> ../component-b</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc http -c</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc grpc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤4: 启动主应用 - main模块会自动引入所有组件</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> ../main</span></span>
<span class="line"><span style="color:#D4D4D4;">go run cmd/main.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>模块化应用的工作原理：</p><ul><li>每个组件在初始化时会生成一个<code>plugin</code>包，用于将自身注册到主应用</li><li>主应用(<code>main</code>模块)会自动导入所有组件的插件，并在运行时初始化它们</li><li>当调用<code>svc init --module</code>时，go-doudou会自动执行<code>go work use</code>将新组件添加到工作区</li><li>同时会更新<code>main/cmd/main.go</code>文件，添加新组件插件的导入语句</li></ul><h3 id="_5-实现枚举类型" tabindex="-1"><a class="header-anchor" href="#_5-实现枚举类型" aria-hidden="true">#</a> 5. 实现枚举类型</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 步骤1: 定义枚举常量</span></span>
<span class="line"><span style="color:#6A9955;"># 在status.go文件中定义如下内容</span></span>
<span class="line"><span style="color:#DCDCAA;">type</span><span style="color:#D4D4D4;"> Status int</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">const (</span></span>
<span class="line"><span style="color:#D4D4D4;">    StatusPending Status = iota</span></span>
<span class="line"><span style="color:#D4D4D4;">    StatusActive</span></span>
<span class="line"><span style="color:#D4D4D4;">    StatusInactive</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤2: 生成枚举接口实现</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou enum -f ./model/status.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_6-生成自动完成脚本" tabindex="-1"><a class="header-anchor" href="#_6-生成自动完成脚本" aria-hidden="true">#</a> 6. 生成自动完成脚本</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 生成bash自动完成脚本</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou completion bash &gt; ~/.bash_completion</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 生成zsh自动完成脚本</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou completion zsh &gt; ~/.zsh_completion</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="高级用法与技巧" tabindex="-1"><a class="header-anchor" href="#高级用法与技巧" aria-hidden="true">#</a> 高级用法与技巧</h2><h3 id="_1-使用注解控制接口权限" tabindex="-1"><a class="header-anchor" href="#_1-使用注解控制接口权限" aria-hidden="true">#</a> 1. 使用注解控制接口权限</h3><p>在service接口中，可以使用特殊注释添加注解，如：</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">// @role(ADMIN)</span></span>
<span class="line"><span style="color:#DCDCAA;">GetAdminData</span><span style="color:#D4D4D4;">(ctx context.Context) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后在中间件中检查这些注解：</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#9CDCFE;">annotations</span><span style="color:#D4D4D4;"> := httpsrv.RouteAnnotationStore.</span><span style="color:#DCDCAA;">GetParams</span><span style="color:#D4D4D4;">(routeName, </span><span style="color:#CE9178;">&quot;@role&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> !sliceutils.</span><span style="color:#DCDCAA;">StringContains</span><span style="color:#D4D4D4;">(annotations, userRole) {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// 拒绝访问</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-自定义protoc命令" tabindex="-1"><a class="header-anchor" href="#_2-自定义protoc命令" aria-hidden="true">#</a> 2. 自定义protoc命令</h3><p>对于复杂的gRPC服务，可以自定义protoc命令：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc grpc --grpc_gen_cmd </span><span style="color:#CE9178;">&quot;protoc --proto_path=. --go_out=. --go_opt=paths=source_relative --go-grpc_out=. --go-grpc_opt=paths=source_relative --validate_out=lang=go,paths=source_relative:. transport/grpc/myservice.proto&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="_3-配置环境变量影响服务行为" tabindex="-1"><a class="header-anchor" href="#_3-配置环境变量影响服务行为" aria-hidden="true">#</a> 3. 配置环境变量影响服务行为</h3><p>go-doudou支持多种环境变量来配置服务行为：</p><ul><li><code>GDD_SERVICE_NAME</code>: 服务名称</li><li><code>GDD_SERVICE_GROUP</code>: 服务组名</li><li><code>GDD_SERVICE_VERSION</code>: 服务版本</li><li><code>GDD_WEIGHT</code>: 服务实例权重</li><li><code>GDD_REGISTER_HOST</code>: 服务注册主机</li><li><code>GDD_HTTP_PORT</code>: HTTP服务端口</li><li><code>GDD_GRPC_PORT</code>: gRPC服务端口</li><li><code>GDD_LOG_LEVEL</code>: 日志级别，可选值：&quot;debug&quot;、&quot;info&quot;、&quot;warn&quot;、&quot;error&quot;</li><li><code>GDD_PROMETHEUS</code>: 是否启用Prometheus指标收集</li></ul><p>示例：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> GDD_SERVICE_NAME=myservice</span></span>
<span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> GDD_HTTP_PORT=8080</span></span>
<span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> GDD_LOG_LEVEL=debug</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc run</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-集成测试技巧" tabindex="-1"><a class="header-anchor" href="#_4-集成测试技巧" aria-hidden="true">#</a> 4. 集成测试技巧</h3><p>利用<code>svc http test</code>命令生成的测试代码，可以轻松实现集成测试：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 步骤1: 从Postman Collection生成测试代码</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc http </span><span style="color:#DCDCAA;">test</span><span style="color:#D4D4D4;"> --collection ./collection.json --dotenv ./.env.test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 步骤2: 运行测试</span></span>
<span class="line"><span style="color:#D4D4D4;">go </span><span style="color:#DCDCAA;">test</span><span style="color:#D4D4D4;"> -v ./test/...</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-模块化应用开发技巧" tabindex="-1"><a class="header-anchor" href="#_5-模块化应用开发技巧" aria-hidden="true">#</a> 5. 模块化应用开发技巧</h3><p>对于大型项目，使用 <code>work</code> 命令和 <code>--module</code> 标志可以轻松管理模块化应用：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 初始化工作区</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou work init my-workspace</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> my-workspace</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 添加多个模块 - go-doudou会自动调用go work use</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc init api-gateway -m my-workspace/api-gateway --module</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc init user-service -m my-workspace/user-service --module</span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou svc init product-service -m my-workspace/product-service --module</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 启动应用（主模块自动引入并初始化所有组件）</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> main</span></span>
<span class="line"><span style="color:#D4D4D4;">go run cmd/main.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>模块化应用的优势：</p><ul><li>代码组织更清晰，每个组件独立维护</li><li>可以独立开发和测试每个组件</li><li>共享依赖通过go.work解决，避免依赖冲突</li><li>主应用自动集成所有组件，无需手动编写集成代码</li><li>适合大型微服务应用的开发和管理</li></ul><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>go-doudou命令行工具提供了丰富的功能，帮助开发者快速构建、部署和管理微服务。通过本文介绍的各种命令和子命令，你可以轻松完成从服务初始化、代码生成到部署的整个流程。</p><p>go-doudou的最大特点是简化了微服务开发流程，无需编写大量样板代码，只需专注于业务逻辑的实现。它支持RESTful API和gRPC服务的生成，以及与数据库的集成，是构建现代Go微服务的理想选择。</p><p>此外，go-doudou还提供了强大的模块化应用开发支持，通过 <code>work</code> 命令和 <code>--module</code> 标志可以轻松管理多模块项目。go-doudou会自动执行<code>go work use</code>将组件添加到工作区，并在主应用中自动导入和初始化所有组件，大大简化了模块化应用的开发和维护工作。</p><div class="custom-container warning"><p class="custom-container-title">重要提示</p><p>请注意，<code>ddl</code> 命令已被废弃，不再推荐使用。如需从数据库生成代码或将Go结构体同步到数据库，请使用 <code>svc crud</code> 命令替代。</p></div><p>希望本文对你理解和使用go-doudou CLI工具有所帮助。更多详情，请参考<a href="https://go-doudou.github.io/" target="_blank" rel="noopener noreferrer">官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>和示例代码库。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/unionj-cloud/go-doudou/edit/main/zh/blog/cli-commands.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: wubinwill@gmail.com">武斌</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.2025f35b.js" defer></script>
  </body>
</html>
