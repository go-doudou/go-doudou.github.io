import{r as o,o as r,a as c,b as s,e as a,w as t,F as i,g as l,f as n}from"./app.2025f35b.js";import{_ as D,a as d}from"./greeting1.9919e1fd.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const b={},m=l('<h1 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started" aria-hidden="true">#</a> Getting Started</h1><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites" aria-hidden="true">#</a> Prerequisites</h2><ul><li>Only supports go1.16 and above</li></ul><h2 id="install-grpc-compiler-and-plugins" tabindex="-1"><a class="header-anchor" href="#install-grpc-compiler-and-plugins" aria-hidden="true">#</a> Install gRPC compiler and plugins</h2><h3 id="install-the-compiler-protoc" tabindex="-1"><a class="header-anchor" href="#install-the-compiler-protoc" aria-hidden="true">#</a> Install the compiler protoc</h3>',5),y=n("Install the Protobuf compiler protoc, you can refer to the "),g={href:"https://grpc.io/docs/protoc-installation/",target:"_blank",rel:"noopener noreferrer"},h=n("official documentation"),v=n(". Here are the installation commands for common operating systems:"),f=l(`<ul><li>Ubuntu:</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">$ apt install -y protobuf-compiler</span></span>
<span class="line"><span style="color:#D4D4D4;">$ protoc --version  </span><span style="color:#6A9955;"># Ensure v3 or above is installed</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,2),C=n("Mac, first install "),_={href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"},E=n("Homebrew"),k=n(":"),w=l(`<div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">$ brew install protobuf</span></span>
<span class="line"><span style="color:#D4D4D4;">$ protoc --version  </span><span style="color:#6A9955;"># Ensure v3 or above is installed</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,1),x=n("For Windows, or if Homebrew installation fails on Mac, download the package from GitHub, extract it, and configure the environment variables yourself."),A=s("br",null,null,-1),j=n(" Latest protoc download link for Windows: "),I={href:"https://github.com/protocolbuffers/protobuf/releases/download/v21.7/protoc-21.7-win64.zip",target:"_blank",rel:"noopener noreferrer"},P=n("https://github.com/protocolbuffers/protobuf/releases/download/v21.7/protoc-21.7-win64.zip"),H=s("br",null,null,-1),G=n(" Latest protoc download link for Mac Intel: "),F={href:"https://github.com/protocolbuffers/protobuf/releases/download/v21.7/protoc-21.7-osx-x86_64.zip",target:"_blank",rel:"noopener noreferrer"},T=n("https://github.com/protocolbuffers/protobuf/releases/download/v21.7/protoc-21.7-osx-x86_64.zip"),N=s("br",null,null,-1),q=n(" For other installation packages, please find them in "),S={href:"https://github.com/protocolbuffers/protobuf/releases",target:"_blank",rel:"noopener noreferrer"},B=n("GitHub releases"),R=n("."),O=l(`<h3 id="install-plugins" tabindex="-1"><a class="header-anchor" href="#install-plugins" aria-hidden="true">#</a> Install plugins</h3><ol><li>Install plugins:</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28</span></span>
<span class="line"><span style="color:#D4D4D4;">$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>Configure environment variables:</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">$ </span><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> PATH=</span><span style="color:#CE9178;">&quot;</span><span style="color:#9CDCFE;">$PATH</span><span style="color:#CE9178;">:$(go env GOPATH)/bin&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,5),z={class:"custom-container tip"},$=s("p",{class:"custom-container-title"},"Tip",-1),L=n("For the latest version numbers, please visit "),U={href:"https://grpc.io/docs/languages/go/quickstart/",target:"_blank",rel:"noopener noreferrer"},M=n("https://grpc.io/docs/languages/go/quickstart/"),W=n("."),Y=l(`<h2 id="install-go-doudou" tabindex="-1"><a class="header-anchor" href="#install-go-doudou" aria-hidden="true">#</a> Install go-doudou</h2><ul><li>If Go version is below 1.17</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go get -v github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>If Go version &gt;= 1.17, it&#39;s recommended to use the following command to install the <code>go-doudou</code> command-line tool globally</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go install -v github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>It&#39;s recommended to use the following command to download go-doudou as a project dependency</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go get -v -d github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>If you encounter a <code>410 Gone error</code>, please execute the following command first, and then execute the above installation command</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> GOSUMDB=off</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>After installation, if you encounter a <code>go-doudou: command not found</code> error, please configure <code>$HOME/go/bin</code> in the <code>~/.bash_profile</code> file, for example:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># .bash_profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># Get the aliases and functions</span></span>
<span class="line"><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> [ -f ~/.bashrc ]; </span><span style="color:#C586C0;">then</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#DCDCAA;">.</span><span style="color:#D4D4D4;"> ~/.bashrc</span></span>
<span class="line"><span style="color:#C586C0;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># User specific environment and startup programs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">PATH=</span><span style="color:#9CDCFE;">$PATH</span><span style="color:#D4D4D4;">:/usr/local/go/bin</span></span>
<span class="line"><span style="color:#D4D4D4;">PATH=</span><span style="color:#9CDCFE;">$PATH</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">$HOME</span><span style="color:#D4D4D4;">/go/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> PATH</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div><h2 id="upgrade" tabindex="-1"><a class="header-anchor" href="#upgrade" aria-hidden="true">#</a> Upgrade</h2><p>You can execute the command <code>go-doudou version</code> to upgrade the globally installed <code>go-doudou</code> command-line tool</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou version                       </span></span>
<span class="line"><span style="color:#D4D4D4;">Installed version is v1.1.9</span></span>
<span class="line"><span style="color:#D4D4D4;">Latest release version is v2.5.8</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2714 Yes</span></span>
<span class="line"><span style="color:#D4D4D4;">go install -v github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"><span style="color:#D4D4D4;">go: downloading github.com/unionj-cloud/go-doudou/v2 v2.5.8</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/constants</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/extraenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/keyenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/columnenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/config</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/nullenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/sortenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/version</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/openapi/v3</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/reflectutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/stringutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/caller</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/pathutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/sliceutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/templateutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/cast</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/zlogger</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/executils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/copier</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/astutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/dotenv</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/yaml</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/sqlext/logger</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/sqlext/wrapper</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/ddlast</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/name</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/protobuf/v3</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/openapi/v3/codegen/client</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/openapi/v3</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/svc/codegen</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/table</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/codegen</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/svc</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2</span></span>
<span class="line"><span style="color:#D4D4D4;">DONE</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou version</span></span>
<span class="line"><span style="color:#D4D4D4;">Installed version is v2.5.8</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  ~ </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou -h                                 </span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou works like a scaffolding tool but more than that. </span></span>
<span class="line"><span style="color:#D4D4D4;">it lets api providers design their apis and </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;"> them code less. </span></span>
<span class="line"><span style="color:#D4D4D4;">it generates openapi 3.0 spec json document </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> frontend developers or other api consumers to understand what apis there, </span></span>
<span class="line"><span style="color:#D4D4D4;">consumers can import it into postman to debug and test, or upload it into some code generators to download client sdk.</span></span>
<span class="line"><span style="color:#D4D4D4;">it provides some useful components and middleware </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> constructing microservice cluster like service register and discovering, </span></span>
<span class="line"><span style="color:#D4D4D4;">load balancing and so on. it just begins, more features will come out soon.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Usage:</span></span>
<span class="line"><span style="color:#D4D4D4;">  go-doudou [flags]</span></span>
<span class="line"><span style="color:#D4D4D4;">  go-doudou [command]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Available Commands:</span></span>
<span class="line"><span style="color:#D4D4D4;">  ddl         migration tool between database table structure and golang struct</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;">        Help about any </span><span style="color:#DCDCAA;">command</span></span>
<span class="line"><span style="color:#D4D4D4;">  name        bulk add or update json tag of struct fields</span></span>
<span class="line"><span style="color:#D4D4D4;">  svc         generate or update service</span></span>
<span class="line"><span style="color:#D4D4D4;">  version     Print the version number of go-doudou</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Flags:</span></span>
<span class="line"><span style="color:#D4D4D4;">  -h, --help      </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> go-doudou</span></span>
<span class="line"><span style="color:#D4D4D4;">  -v, --version   version </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> go-doudou</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Use </span><span style="color:#CE9178;">&quot;go-doudou [command] --help&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> more information about a command.</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="hello-world" tabindex="-1"><a class="header-anchor" href="#hello-world" aria-hidden="true">#</a> Hello World</h2><h3 id="initialize-project" tabindex="-1"><a class="header-anchor" href="#initialize-project" aria-hidden="true">#</a> Initialize Project</h3><p>Execute the <code>go-doudou svc init</code> command. You can set the <code>-m</code> parameter to specify the module name.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc init helloworld -m github.com/unionj-cloud/helloworld</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>This command will generate a <code>helloworld</code> folder and some initialization files.</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 tree -a 
.
\u251C\u2500\u2500 .env
\u251C\u2500\u2500 .git
\u2502   \u251C\u2500\u2500 HEAD
\u2502   \u251C\u2500\u2500 objects
\u2502   \u2502   \u251C\u2500\u2500 info
\u2502   \u2502   \u2514\u2500\u2500 pack
\u2502   \u2514\u2500\u2500 refs
\u2502       \u251C\u2500\u2500 heads
\u2502       \u2514\u2500\u2500 tags
\u251C\u2500\u2500 .gitignore
\u251C\u2500\u2500 Dockerfile
\u251C\u2500\u2500 go.mod
\u251C\u2500\u2500 svc.go
\u2514\u2500\u2500 vo
    \u2514\u2500\u2500 vo.go

8 directories, 7 files
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li><p><code>Dockerfile</code>: For packaging docker images</p></li><li><p><code>svc.go</code>: Define methods in the <code>Helloworld</code> interface in this file, go-doudou generates corresponding RESTful interface code based on your defined methods</p></li><li><p><code>vo</code> package: Define <code>view object</code> structures for request bodies and response bodies. You can manually create multiple go files. The structures defined in the <code>vo</code> package will all be generated as <code>schemas</code> in the json format interface document of <code>OpenAPI 3.0</code></p></li><li><p><code>.env</code>: Configuration file, the configurations inside will be loaded into environment variables</p></li></ul><h3 id="define-interface" tabindex="-1"><a class="header-anchor" href="#define-interface" aria-hidden="true">#</a> Define Interface</h3>`,21),V=n("The "),J=s("code",null,"svc.go",-1),X=n(" file is equivalent to an interface definition file. We define methods in the "),K=s("code",null,"Helloworld",-1),Q=n(" interface to define our APIs. Now let's comment out the default generated example "),Z=s("code",null,"PageUsers",-1),ss=n(" method and define our own interface "),ns=s("code",null,"Greeting",-1),as=n(". Please refer to the "),ls=n("Define API"),es=n(" chapter for more information."),os=l(`<div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;">* Generated by go-doudou v2.5.8.</span></span>
<span class="line"><span style="color:#6A9955;">* You can edit it as your need.</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">//go:generate go-doudou svc http -c</span></span>
<span class="line"><span style="color:#6A9955;">//go:generate go-doudou svc grpc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Helloworld</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="generate-code" tabindex="-1"><a class="header-anchor" href="#generate-code" aria-hidden="true">#</a> Generate Code</h3><p>First execute the following command</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http -c</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Then execute <code>go mod tidy</code> to download dependencies. If you&#39;re using Go version 1.17, you might see the following prompt:</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">To upgrade to the versions selected by go 1.16:
	go mod tidy -go=1.16 &amp;&amp; go mod tidy -go=1.17
If reproducibility with go 1.16 is not needed:
	go mod tidy -compat=1.17
For other options, see:
	https://golang.org/doc/modules/pruning
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>In this case, you need to execute the command <code>go mod tidy -go=1.16 &amp;&amp; go mod tidy -go=1.17</code> or <code>go mod tidy -compat=1.17</code>. Let&#39;s see what was generated.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#DCDCAA;">.</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 Dockerfile</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 client</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u251C\u2500\u2500 client.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u251C\u2500\u2500 clientproxy.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 iclient.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 cmd</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 config</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 config.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 db</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 db.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.sum</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.json</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svc.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svcimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 transport</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 httpsrv</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502       \u251C\u2500\u2500 handler.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502       \u251C\u2500\u2500 handlerimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502       \u2514\u2500\u2500 middleware.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2514\u2500\u2500 vo</span></span>
<span class="line"><span style="color:#D4D4D4;">    \u2514\u2500\u2500 vo.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div>`,8),ps=s("li",null,[s("code",null,"helloworld_openapi3.json"),n(": JSON format "),s("code",null,"OpenAPI 3.0"),n(" interface document")],-1),rs=s("li",null,[s("code",null,"helloworld_openapi3.go"),n(": Assigns the content of the "),s("code",null,"OpenAPI 3.0"),n(" interface document to a global variable for online browsing")],-1),cs=s("code",null,"client",-1),ts=n(" package: Go language http request client code encapsulated based on "),is={href:"https://github.com/go-resty/resty",target:"_blank",rel:"noopener noreferrer"},Ds=n("resty"),ds=l("<li><code>cmd</code> package: Entry point for the entire program</li><li><code>config</code> package: For loading business-related configurations</li><li><code>db</code> package: Utility code for connecting to databases</li><li><code>svcimpl.go</code>: Implement the interface in this file, write real business logic code</li><li><code>transport</code> package: HTTP network layer code, mainly responsible for parsing input parameters and encoding output parameters</li>",5),us=l(`<h3 id="start-service" tabindex="-1"><a class="header-anchor" href="#start-service" aria-hidden="true">#</a> Start Service</h3><p>Execute the command <code>go-doudou svc run</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 go-doudou svc run</span></span>
<span class="line"><span style="color:#D4D4D4;">2022/11/06 21:46:19 maxprocs: Leaving GOMAXPROCS=16: CPU quota undefined</span></span>
<span class="line"><span style="color:#D4D4D4;">                           _                    _</span></span>
<span class="line"><span style="color:#D4D4D4;">                          | |                  | |</span></span>
<span class="line"><span style="color:#D4D4D4;">  __ _   ___   ______   __| |  ___   _   _   __| |  ___   _   _</span></span>
<span class="line"><span style="color:#D4D4D4;"> / _</span><span style="color:#CE9178;">\` </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">______</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _\`</span><span style="color:#D4D4D4;"> | / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">| | | | / _</span><span style="color:#CE9178;">\` </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">        </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_, </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/          </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/  </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/  </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">  __/ </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">___/</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF ================ Registered Routes ================</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">         NAME         </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> METHOD </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">         PATTERN         </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> Greeting             </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> POST   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /greeting               </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDoc               </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/doc          </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetOpenAPI           </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/openapi.json </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> Prometheus           </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/prometheus   </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetConfig            </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/config       </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetStatsvizWs        </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/statsviz/ws  </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetStatsviz          </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/statsviz/</span><span style="color:#D4D4D4;">*</span><span style="color:#CE9178;">   </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofCmdline </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/cmdline    </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofProfile </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/profile    </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofSymbol  </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/symbol     </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofTrace   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/trace      </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofIndex   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/</span><span style="color:#D4D4D4;">*</span><span style="color:#CE9178;">          </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF ===================================================</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF Http server is listening at :6060</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF Http server started </span><span style="color:#C586C0;">in</span><span style="color:#CE9178;"> 1.993608ms</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="postman" tabindex="-1"><a class="header-anchor" href="#postman" aria-hidden="true">#</a> Postman</h3><p>Import the <code>helloworld_openapi3.json</code> file into Postman to test the <code>/greeting</code> API. You can see it returns fake data. <img src="`+D+`" alt="greeting"></p><h3 id="implement-interface" tabindex="-1"><a class="header-anchor" href="#implement-interface" aria-hidden="true">#</a> Implement Interface</h3><p>Now we are going to implement the real business logic in the <code>svcimpl.go</code> file. Let&#39;s first look at the current code.</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;">* Generated by go-doudou v2.5.8.</span></span>
<span class="line"><span style="color:#6A9955;">* You can edit it as your need.</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/brianvoe/gofakeit/v6&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/config&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;"> Helloworld = (*HelloworldImpl)(</span><span style="color:#569CD6;">nil</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloworldImpl</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	conf *config.Config</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (receiver *HelloworldImpl) </span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">_result</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">		Data </span><span style="color:#4EC9B0;">string</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;"> = gofakeit.</span><span style="color:#DCDCAA;">Struct</span><span style="color:#D4D4D4;">(&amp;_result)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> _result.Data, </span><span style="color:#569CD6;">nil</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">NewHelloworld</span><span style="color:#D4D4D4;">(conf *config.Config) *HelloworldImpl {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> &amp;HelloworldImpl{</span></span>
<span class="line"><span style="color:#D4D4D4;">		conf: conf,</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>We use the <a href="github.com/brianvoe/gofakeit">gofakeit</a> library to help us generate fake data. We first need to delete this code.</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;">* Generated by go-doudou v2.5.8.</span></span>
<span class="line"><span style="color:#6A9955;">* You can edit it as your need.</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/config&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;"> Helloworld = (*HelloworldImpl)(</span><span style="color:#569CD6;">nil</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloworldImpl</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	conf *config.Config</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (receiver *HelloworldImpl) </span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> fmt.</span><span style="color:#DCDCAA;">Sprintf</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Hello </span><span style="color:#9CDCFE;">%s</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">, greeting), </span><span style="color:#569CD6;">nil</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">NewHelloworld</span><span style="color:#D4D4D4;">(conf *config.Config) *HelloworldImpl {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> &amp;HelloworldImpl{</span></span>
<span class="line"><span style="color:#D4D4D4;">		conf: conf,</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>We deleted the code from lines 21 to 25 and replaced it with <code>return fmt.Sprintf(&quot;Hello %s&quot;, greeting), nil</code>. Let&#39;s test the effect again. <img src="`+d+`" alt="greeting1"> Isn&#39;t it very simple to write RESTful APIs with go-doudou!</p><h3 id="grpc-service" tabindex="-1"><a class="header-anchor" href="#grpc-service" aria-hidden="true">#</a> gRPC Service</h3><p>Next, we&#39;ll add gRPC service to the project. gRPC is the most popular RPC framework in the Go ecosystem. gRPC uses <code>http2</code> as the network protocol and <code>protobuf</code> as the message body serialization scheme. The general process of developing gRPC services is roughly the following steps:</p><ol><li>First, define <code>message</code> and <code>service</code> in a <code>.proto</code> file according to the <code>protobuf</code> syntax</li><li>Then execute a command like <code>protoc --proto_path=. --go_out=. --go_opt=paths=source_relative --go-grpc_out=. --go-grpc_opt=paths=source_relative transport/grpc/helloworld.proto</code> to generate server and client stub code</li><li>Then define your own struct and methods to implement interfaces like <code>pb.HelloworldServiceServer</code> to implement business logic</li><li>Finally, add code similar to the following in the <code>main</code> function to start the gRPC service:</li></ol><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">...</span></span>
<span class="line"><span style="color:#9CDCFE;">grpcServer</span><span style="color:#D4D4D4;"> := grpc.</span><span style="color:#DCDCAA;">NewServer</span><span style="color:#D4D4D4;">(opts...)</span></span>
<span class="line"><span style="color:#D4D4D4;">pb.</span><span style="color:#DCDCAA;">RegisterHelloworldServiceServer</span><span style="color:#D4D4D4;">(grpcServer, svc)</span></span>
<span class="line"><span style="color:#D4D4D4;">grpcServer.</span><span style="color:#DCDCAA;">Serve</span><span style="color:#D4D4D4;">(lis)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>If you use <code>go-doudou</code> as a development framework to develop gRPC services, it will be much simpler. Using the <code>Helloworld</code> project above as an example, only two steps are needed:</p><h4 id="generate-grpc-code" tabindex="-1"><a class="header-anchor" href="#generate-grpc-code" aria-hidden="true">#</a> Generate gRPC Code</h4><p>Execute the command <code>go-doudou svc grpc</code> at the project root path. This command directly generates <code>.proto</code> files, server and client stub code, and implementations of the <code>pb.HelloworldServiceServer</code> interface in the <code>svcimpl.go</code> file. We just need to implement specific business logic in the generated methods.</p><p>The folder structure at this point is as follows:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#DCDCAA;">.</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 Dockerfile</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 client</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u251C\u2500\u2500 client.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u251C\u2500\u2500 clientproxy.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 iclient.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 cmd</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 config</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 config.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 db</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 db.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.sum</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.json</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svc.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svcimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 transport</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u251C\u2500\u2500 grpc</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2502   \u251C\u2500\u2500 annotation.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2502   \u251C\u2500\u2500 helloworld.pb.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2502   \u251C\u2500\u2500 helloworld.proto</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2502   \u2514\u2500\u2500 helloworld_grpc.pb.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502   \u2514\u2500\u2500 httpsrv</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502       \u251C\u2500\u2500 handler.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div>`,20);function bs(ms,ys){const e=o("ExternalLinkIcon"),p=o("RouterLink");return r(),c(i,null,[m,s("p",null,[y,s("a",g,[h,a(e)]),v]),f,s("ul",null,[s("li",null,[C,s("a",_,[E,a(e)]),k])]),w,s("ul",null,[s("li",null,[x,A,j,s("a",I,[P,a(e)]),H,G,s("a",F,[T,a(e)]),N,q,s("a",S,[B,a(e)]),R])]),O,s("div",z,[$,s("p",null,[L,s("a",U,[M,a(e)]),W])]),Y,s("p",null,[V,J,X,K,Q,Z,ss,ns,as,a(p,{to:"/guide/idl.html"},{default:t(()=>[ls]),_:1}),es]),os,s("ul",null,[ps,rs,s("li",null,[cs,ts,s("a",is,[Ds,a(e)])]),ds]),us],64)}var fs=u(b,[["render",bs]]);export{fs as default};
