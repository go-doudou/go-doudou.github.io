import{r as o,o as c,a as t,b as n,e as a,w as r,F as D,g as l,f as s}from"./app.2025f35b.js";import{_ as i,a as u}from"./greeting1.9919e1fd.js";import{_ as d}from"./plugin-vue_export-helper.21dcd24c.js";var b="/images/postmangrpc.jpeg";const y={},m=l('<h1 id="\u5FEB\u901F\u5F00\u59CB" tabindex="-1"><a class="header-anchor" href="#\u5FEB\u901F\u5F00\u59CB" aria-hidden="true">#</a> \u5FEB\u901F\u5F00\u59CB</h1><h2 id="\u5148\u51B3\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5148\u51B3\u6761\u4EF6" aria-hidden="true">#</a> \u5148\u51B3\u6761\u4EF6</h2><ul><li>\u53EA\u652F\u6301go1.16\u53CA\u4EE5\u4E0A</li></ul><h2 id="\u5B89\u88C5grpc\u7F16\u8BD1\u5668\u548C\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5grpc\u7F16\u8BD1\u5668\u548C\u63D2\u4EF6" aria-hidden="true">#</a> \u5B89\u88C5gRPC\u7F16\u8BD1\u5668\u548C\u63D2\u4EF6</h2><h3 id="\u5B89\u88C5\u7F16\u8BD1\u5668protoc" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u7F16\u8BD1\u5668protoc" aria-hidden="true">#</a> \u5B89\u88C5\u7F16\u8BD1\u5668protoc</h3>',5),g=s("\u5B89\u88C5Protobuf\u7F16\u8BD1\u5668protoc\uFF0C\u53EF\u53C2\u8003"),C={href:"https://grpc.io/docs/protoc-installation/",target:"_blank",rel:"noopener noreferrer"},h=s("\u5B98\u65B9\u6587\u6863"),E=s("\uFF0C\u8FD9\u91CC\u8D34\u4E00\u4E0B\u5E38\u89C1\u64CD\u4F5C\u7CFB\u7EDF\u4E0B\u7684\u5B89\u88C5\u547D\u4EE4\uFF1A"),v=l(`<ul><li>Ubuntu\u7CFB\u7EDF:</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">$ apt install -y protobuf-compiler</span></span>
<span class="line"><span style="color:#D4D4D4;">$ protoc --version  </span><span style="color:#6A9955;"># \u786E\u4FDD\u5B89\u88C5v3\u53CA\u4EE5\u4E0A\u7248\u672C</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,2),_=s("Mac\u7CFB\u7EDF\uFF0C\u9700\u8981\u5148\u5B89\u88C5"),f={href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"},A=s("Homebrew"),k=s(":"),w=l(`<div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">$ brew install protobuf</span></span>
<span class="line"><span style="color:#D4D4D4;">$ protoc --version  </span><span style="color:#6A9955;"># \u786E\u4FDD\u5B89\u88C5v3\u53CA\u4EE5\u4E0A\u7248\u672C</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,1),x=s("Windows\u7CFB\u7EDF\uFF0C\u6216\u8005Mac\u7CFB\u7EDF\u5B89\u88C5Homebrew\u5931\u8D25\uFF0C\u9700\u4ECEgithub\u4E0B\u8F7D\u5B89\u88C5\u5305\uFF0C\u89E3\u538B\u540E\uFF0C\u81EA\u884C\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\u3002"),I=n("br",null,null,-1),S=s(" Windows\u7CFB\u7EDF\u6700\u65B0protoc\u4E0B\u8F7D\u5730\u5740\uFF1A"),G={href:"https://github.com/protocolbuffers/protobuf/releases/download/v21.7/protoc-21.7-win64.zip",target:"_blank",rel:"noopener noreferrer"},q=s("https://github.com/protocolbuffers/protobuf/releases/download/v21.7/protoc-21.7-win64.zip"),F=s(" Mac\u7CFB\u7EDFIntel\u6700\u65B0protoc\u4E0B\u8F7D\u5730\u5740\uFF1A"),R={href:"https://github.com/protocolbuffers/protobuf/releases/download/v21.7/protoc-21.7-osx-x86_64.zip",target:"_blank",rel:"noopener noreferrer"},N=s("https://github.com/protocolbuffers/protobuf/releases/download/v21.7/protoc-21.7-osx-x86_64.zip"),j=n("br",null,null,-1),P=s(" \u5176\u4ED6\u5B89\u88C5\u5305\u8BF7\u5728 "),H={href:"https://github.com/protocolbuffers/protobuf/releases",target:"_blank",rel:"noopener noreferrer"},T=s("github releases"),B=s(" \u91CC\u627E\u3002"),O=l(`<h3 id="\u5B89\u88C5\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u63D2\u4EF6" aria-hidden="true">#</a> \u5B89\u88C5\u63D2\u4EF6</h3><ol><li>\u5B89\u88C5\u63D2\u4EF6:</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">$ go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28</span></span>
<span class="line"><span style="color:#D4D4D4;">$ go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>\u914D\u7F6E\u73AF\u5883\u53D8\u91CF:</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">$ </span><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> PATH=</span><span style="color:#CE9178;">&quot;</span><span style="color:#9CDCFE;">$PATH</span><span style="color:#CE9178;">:$(go env GOPATH)/bin&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,5),z={class:"custom-container tip"},U=n("p",{class:"custom-container-title"},"\u63D0\u793A",-1),M=s("\u6700\u65B0\u7248\u672C\u53F7\u8BF7\u8DF3\u8F6C "),$={href:"https://grpc.io/docs/languages/go/quickstart/",target:"_blank",rel:"noopener noreferrer"},L=s("https://grpc.io/docs/languages/go/quickstart/"),Y=s(" \u67E5\u627E\u3002"),V=l(`<h2 id="\u5B89\u88C5go-doudou" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5go-doudou" aria-hidden="true">#</a> \u5B89\u88C5go-doudou</h2><ul><li>\u5982\u679CGo\u7248\u672C\u4F4E\u4E8E1.17</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go get -v github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>\u5982\u679CGo\u7248\u672C &gt;= 1.17\uFF0C\u63A8\u8350\u91C7\u7528\u5982\u4E0B\u547D\u4EE4\u5168\u5C40\u5B89\u88C5<code>go-doudou</code>\u547D\u4EE4\u884C\u5DE5\u5177</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go install -v github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u63A8\u8350\u91C7\u7528\u5982\u4E0B\u547D\u4EE4\u4E0B\u8F7Dgo-doudou\u4F5C\u4E3A\u9879\u76EE\u7684\u4F9D\u8D56</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go get -v -d github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u5982\u679C\u9047\u5230<code>410 Gone error</code>\u62A5\u9519\uFF0C\u8BF7\u5148\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF0C\u518D\u6267\u884C\u4E0A\u8FF0\u7684\u5B89\u88C5\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> GOSUMDB=off</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5B89\u88C5\u5B8C\u6210\u540E\uFF0C\u5982\u679C\u9047\u5230<code>go-doudou: command not found</code>\u62A5\u9519\uFF0C\u8BF7\u5C06<code>$HOME/go/bin</code>\u914D\u7F6E\u5230<code>~/.bash_profile</code>\u6587\u4EF6\u91CC\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># .bash_profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># Get the aliases and functions</span></span>
<span class="line"><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> [ -f ~/.bashrc ]; </span><span style="color:#C586C0;">then</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#DCDCAA;">.</span><span style="color:#D4D4D4;"> ~/.bashrc</span></span>
<span class="line"><span style="color:#C586C0;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># User specific environment and startup programs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">PATH=</span><span style="color:#9CDCFE;">$PATH</span><span style="color:#D4D4D4;">:/usr/local/go/bin</span></span>
<span class="line"><span style="color:#D4D4D4;">PATH=</span><span style="color:#9CDCFE;">$PATH</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">$HOME</span><span style="color:#D4D4D4;">/go/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> PATH</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div><h2 id="\u5347\u7EA7" tabindex="-1"><a class="header-anchor" href="#\u5347\u7EA7" aria-hidden="true">#</a> \u5347\u7EA7</h2><p>\u4F60\u53EF\u4EE5\u6267\u884C\u547D\u4EE4<code>go-doudou version</code>\u6765\u5347\u7EA7\u5168\u5C40\u5B89\u88C5\u7684<code>go-doudou</code>\u547D\u4EE4\u884C\u5DE5\u5177</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou version                       </span></span>
<span class="line"><span style="color:#D4D4D4;">Installed version is v1.1.9</span></span>
<span class="line"><span style="color:#D4D4D4;">Latest release version is v2.5.8</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2714 Yes</span></span>
<span class="line"><span style="color:#D4D4D4;">go install -v github.com/unionj-cloud/go-doudou/v2@v2.5.8</span></span>
<span class="line"><span style="color:#D4D4D4;">go: downloading github.com/unionj-cloud/go-doudou/v2 v2.5.8</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/constants</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/extraenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/keyenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/columnenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/config</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/nullenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/sortenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/version</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/openapi/v3</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/reflectutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/stringutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/caller</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/pathutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/sliceutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/templateutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/cast</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/zlogger</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/executils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/copier</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/astutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/dotenv</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/yaml</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/sqlext/logger</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/toolkit/sqlext/wrapper</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/ddlast</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/name</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/protobuf/v3</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/openapi/v3/codegen/client</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/openapi/v3</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/svc/codegen</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/table</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl/codegen</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/svc</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd/internal/ddl</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2/cmd</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/v2</span></span>
<span class="line"><span style="color:#D4D4D4;">DONE</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou version</span></span>
<span class="line"><span style="color:#D4D4D4;">Installed version is v2.5.8</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  ~ </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u7528\u6CD5" aria-hidden="true">#</a> \u7528\u6CD5</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou -h                                 </span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou works like a scaffolding tool but more than that. </span></span>
<span class="line"><span style="color:#D4D4D4;">it lets api providers design their apis and </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;"> them code less. </span></span>
<span class="line"><span style="color:#D4D4D4;">it generates openapi 3.0 spec json document </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> frontend developers or other api consumers to understand what apis there, </span></span>
<span class="line"><span style="color:#D4D4D4;">consumers can import it into postman to debug and test, or upload it into some code generators to download client sdk.</span></span>
<span class="line"><span style="color:#D4D4D4;">it provides some useful components and middleware </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> constructing microservice cluster like service register and discovering, </span></span>
<span class="line"><span style="color:#D4D4D4;">load balancing and so on. it just begins, more features will come out soon.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Usage:</span></span>
<span class="line"><span style="color:#D4D4D4;">  go-doudou [flags]</span></span>
<span class="line"><span style="color:#D4D4D4;">  go-doudou [command]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Available Commands:</span></span>
<span class="line"><span style="color:#D4D4D4;">  ddl         migration tool between database table structure and golang struct</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;">        Help about any </span><span style="color:#DCDCAA;">command</span></span>
<span class="line"><span style="color:#D4D4D4;">  name        bulk add or update json tag of struct fields</span></span>
<span class="line"><span style="color:#D4D4D4;">  svc         generate or update service</span></span>
<span class="line"><span style="color:#D4D4D4;">  version     Print the version number of go-doudou</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Flags:</span></span>
<span class="line"><span style="color:#D4D4D4;">  -h, --help      </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> go-doudou</span></span>
<span class="line"><span style="color:#D4D4D4;">  -v, --version   version </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> go-doudou</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Use </span><span style="color:#CE9178;">&quot;go-doudou [command] --help&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> more information about a command.</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="hello-world" tabindex="-1"><a class="header-anchor" href="#hello-world" aria-hidden="true">#</a> Hello World</h2><h3 id="\u521D\u59CB\u5316\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u521D\u59CB\u5316\u9879\u76EE" aria-hidden="true">#</a> \u521D\u59CB\u5316\u9879\u76EE</h3><p>\u6267\u884C <code>go-doudou svc init</code> \u547D\u4EE4\uFF0C\u4F60\u53EF\u4EE5\u8BBE\u7F6E<code>-m</code>\u53C2\u6570\uFF0C\u6307\u5B9A\u6A21\u5757\u540D\u79F0\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc init helloworld -m github.com/unionj-cloud/helloworld</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u8FD9\u884C\u547D\u4EE4\u4F1A\u751F\u6210<code>helloworld</code>\u6587\u4EF6\u5939\u548C\u4E00\u4E9B\u521D\u59CB\u5316\u6587\u4EF6\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 tree -a 
.
\u251C\u2500\u2500 .env
\u251C\u2500\u2500 .git
\u2502\xA0\xA0 \u251C\u2500\u2500 HEAD
\u2502\xA0\xA0 \u251C\u2500\u2500 objects
\u2502\xA0\xA0 \u2502\xA0\xA0 \u251C\u2500\u2500 info
\u2502\xA0\xA0 \u2502\xA0\xA0 \u2514\u2500\u2500 pack
\u2502\xA0\xA0 \u2514\u2500\u2500 refs
\u2502\xA0\xA0     \u251C\u2500\u2500 heads
\u2502\xA0\xA0     \u2514\u2500\u2500 tags
\u251C\u2500\u2500 .gitignore
\u251C\u2500\u2500 Dockerfile
\u251C\u2500\u2500 go.mod
\u251C\u2500\u2500 svc.go
\u2514\u2500\u2500 vo
    \u2514\u2500\u2500 vo.go

8 directories, 7 files
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li><p><code>Dockerfile</code>\uFF1A\u7528\u4E8E\u6253\u5305docker\u955C\u50CF</p></li><li><p><code>svc.go</code>: \u5728\u8FD9\u4E2A\u6587\u4EF6\u91CC\u7684<code>Helloworld</code>\u63A5\u53E3\u91CC\u9762\u5B9A\u4E49\u65B9\u6CD5\uFF0Cgo-doudou\u901A\u8FC7\u4F60\u5B9A\u4E49\u7684\u65B9\u6CD5\u751F\u6210\u5BF9\u5E94\u7684RESTful\u63A5\u53E3\u4EE3\u7801</p></li><li><p><code>vo</code>\u5305\uFF1A\u91CC\u9762\u5B9A\u4E49<code>view object</code>\u7ED3\u6784\u4F53\uFF0C\u7528\u4E8E\u8BF7\u6C42\u4F53\u548C\u54CD\u5E94\u4F53\uFF0C\u53EF\u4EE5\u624B\u52A8\u521B\u5EFA\u591A\u4E2Ago\u6587\u4EF6\uFF0C<code>vo</code>\u5305\u91CC\u5B9A\u4E49\u7684\u7ED3\u6784\u4F53\u90FD\u4F1A\u4F5C\u4E3A<code>OpenAPI 3.0</code>\u7684<code>schema</code>\u751F\u6210\u5230json\u683C\u5F0F\u7684\u63A5\u53E3\u6587\u6863\u4E2D</p></li><li><p><code>.env</code>: \u914D\u7F6E\u6587\u4EF6\uFF0C\u91CC\u9762\u7684\u914D\u7F6E\u4F1A\u88AB\u52A0\u8F7D\u5230\u73AF\u5883\u53D8\u91CF\u91CC</p></li></ul><h3 id="\u5B9A\u4E49\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u5B9A\u4E49\u63A5\u53E3" aria-hidden="true">#</a> \u5B9A\u4E49\u63A5\u53E3</h3>`,21),W=n("code",null,"svc.go",-1),J=s("\u6587\u4EF6\u76F8\u5F53\u4E8E\u662F\u63A5\u53E3\u5B9A\u4E49\u6587\u4EF6\uFF0C\u6211\u4EEC\u5728"),K=n("code",null,"Helloworld",-1),X=s("\u63A5\u53E3\u91CC\u5B9A\u4E49\u65B9\u6CD5\u5C31\u662F\u5728\u5B9A\u4E49\u63A5\u53E3\u3002\u6211\u4EEC\u73B0\u5728\u6CE8\u91CA\u6389\u9ED8\u8BA4\u751F\u6210\u7684\u4F8B\u5B50"),Q=n("code",null,"PageUsers",-1),Z=s("\u65B9\u6CD5\uFF0C\u5B9A\u4E49\u6211\u4EEC\u81EA\u5DF1\u7684\u4E00\u4E2A\u63A5\u53E3"),ss=n("code",null,"Greeting",-1),ns=s("\u3002\u8BF7\u53C2\u9605"),as=s("Define API"),ls=s(" \u7AE0\u8282\u5185\u5BB9\u4E86\u89E3\u66F4\u591A\u3002"),ps=l(`<div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;">* Generated by go-doudou v2.5.8.</span></span>
<span class="line"><span style="color:#6A9955;">* You can edit it as your need.</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">//go:generate go-doudou svc http -c</span></span>
<span class="line"><span style="color:#6A9955;">//go:generate go-doudou svc grpc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Helloworld</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="\u751F\u6210\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u751F\u6210\u4EE3\u7801" aria-hidden="true">#</a> \u751F\u6210\u4EE3\u7801</h3><p>\u5148\u6267\u884C\u5982\u4E0B\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http -c</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u7136\u540E\u518D\u6267\u884C<code>go mod tidy</code>\u6765\u4E0B\u8F7D\u4F9D\u8D56\u3002\u5982\u679C\u4F60\u4F7F\u7528\u7684Go\u7248\u672C\u662F1.17\uFF0C\u4F60\u53EF\u80FD\u4F1A\u770B\u5230\u5982\u4E0B\u63D0\u793A\u4FE1\u606F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">To upgrade to the versions selected by go 1.16:
	go mod tidy -go=1.16 &amp;&amp; go mod tidy -go=1.17
If reproducibility with go 1.16 is not needed:
	go mod tidy -compat=1.17
For other options, see:
	https://golang.org/doc/modules/pruning
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u8FD9\u65F6\u4F60\u9700\u8981\u6267\u884C\u547D\u4EE4<code>go mod tidy -go=1.16 &amp;&amp; go mod tidy -go=1.17</code>\u6216\u8005<code>go mod tidy -compat=1.17</code>\u3002 \u8BA9\u6211\u4EEC\u770B\u770B\u751F\u6210\u4E86\u4EC0\u4E48\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#DCDCAA;">.</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 Dockerfile</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 client</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u251C\u2500\u2500 client.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u251C\u2500\u2500 clientproxy.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 iclient.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 cmd</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 config</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 config.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 db</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 db.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.sum</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.json</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svc.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svcimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 transport</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 httpsrv</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u251C\u2500\u2500 handler.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u251C\u2500\u2500 handlerimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u2514\u2500\u2500 middleware.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2514\u2500\u2500 vo</span></span>
<span class="line"><span style="color:#D4D4D4;">    \u2514\u2500\u2500 vo.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div>`,8),es=n("li",null,[n("code",null,"helloworld_openapi3.json"),s(": json\u683C\u5F0F\u7684"),n("code",null,"OpenAPI 3.0"),s("\u63A5\u53E3\u6587\u6863")],-1),os=n("li",null,[n("code",null,"helloworld_openapi3.go"),s(": \u5C06"),n("code",null,"OpenAPI 3.0"),s("\u63A5\u53E3\u6587\u6863\u7684\u5185\u5BB9\u8D4B\u503C\u7ED9\u4E00\u4E2A\u5168\u5C40\u7684\u53D8\u91CF\u7528\u4E8E\u5728\u7EBF\u6D4F\u89C8")],-1),rs=n("code",null,"client",-1),cs=s("\u5305: \u57FA\u4E8E"),ts={href:"https://github.com/go-resty/resty",target:"_blank",rel:"noopener noreferrer"},Ds=s("resty"),is=s(" \u5C01\u88C5\u7684Go\u8BED\u8A00http\u8BF7\u6C42\u5BA2\u6237\u7AEF\u4EE3\u7801"),us=l("<li><code>cmd</code>\u5305: \u6574\u4E2A\u7A0B\u5E8F\u7684\u5165\u53E3</li><li><code>config</code>\u5305: \u7528\u4E8E\u52A0\u8F7D\u4E0E\u4E1A\u52A1\u76F8\u5173\u7684\u914D\u7F6E</li><li><code>db</code>\u5305: \u8FDE\u63A5\u6570\u636E\u5E93\u7684\u5DE5\u5177\u4EE3\u7801</li><li><code>svcimpl.go</code>: \u5728\u8FD9\u4E2A\u6587\u4EF6\u4E2D\u5B9E\u73B0\u63A5\u53E3\uFF0C\u7F16\u5199\u771F\u5B9E\u7684\u4E1A\u52A1\u903B\u8F91\u4EE3\u7801</li><li><code>transport</code>\u5305: http\u7F51\u7EDC\u5C42\u4EE3\u7801\uFF0C\u4E3B\u8981\u8D1F\u8D23\u89E3\u6790\u5165\u53C2\u548C\u7F16\u7801\u51FA\u53C2</li>",5),ds=l(`<h3 id="\u542F\u52A8\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8\u670D\u52A1" aria-hidden="true">#</a> \u542F\u52A8\u670D\u52A1</h3><p>\u6267\u884C\u547D\u4EE4<code>go-doudou svc run</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 go-doudou svc run</span></span>
<span class="line"><span style="color:#D4D4D4;">2022/11/06 21:46:19 maxprocs: Leaving GOMAXPROCS=16: CPU quota undefined</span></span>
<span class="line"><span style="color:#D4D4D4;">                           _                    _</span></span>
<span class="line"><span style="color:#D4D4D4;">                          | |                  | |</span></span>
<span class="line"><span style="color:#D4D4D4;">  __ _   ___   ______   __| |  ___   _   _   __| |  ___   _   _</span></span>
<span class="line"><span style="color:#D4D4D4;"> / _</span><span style="color:#CE9178;">\` </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">______</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _\`</span><span style="color:#D4D4D4;"> | / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">| | | | / _</span><span style="color:#CE9178;">\` </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">        </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_, </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/          </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/  </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/  </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">  __/ </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">___/</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF ================ Registered Routes ================</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">         NAME         </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> METHOD </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">         PATTERN         </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> Greeting             </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> POST   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /greeting               </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDoc               </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/doc          </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetOpenAPI           </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/openapi.json </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> Prometheus           </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/prometheus   </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetConfig            </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/config       </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetStatsvizWs        </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/statsviz/ws  </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetStatsviz          </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/statsviz/</span><span style="color:#D4D4D4;">*</span><span style="color:#CE9178;">   </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofCmdline </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/cmdline    </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofProfile </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/profile    </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofSymbol  </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/symbol     </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofTrace   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/trace      </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofIndex   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/</span><span style="color:#D4D4D4;">*</span><span style="color:#CE9178;">          </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF ===================================================</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF Http server is listening at :6060</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 21:46:19 INF Http server started </span><span style="color:#C586C0;">in</span><span style="color:#CE9178;"> 1.993608ms</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="postman" tabindex="-1"><a class="header-anchor" href="#postman" aria-hidden="true">#</a> Postman</h3><p>\u5C06<code>helloworld_openapi3.json</code>\u6587\u4EF6\u5BFC\u5165postman\uFF0C\u6D4B\u8BD5<code>/greeting</code>\u63A5\u53E3\u3002\u4F60\u53EF\u4EE5\u770B\u5230\u8FD4\u56DE\u4E86\u5047\u6570\u636E\u3002 <img src="`+i+`" alt="greeting"></p><h3 id="\u5B9E\u73B0\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u63A5\u53E3" aria-hidden="true">#</a> \u5B9E\u73B0\u63A5\u53E3</h3><p>\u73B0\u5728\u6211\u4EEC\u8981\u5728<code>svcimpl.go</code>\u6587\u4EF6\u91CC\u5B9E\u73B0\u771F\u5B9E\u7684\u4E1A\u52A1\u903B\u8F91\u4E86\u3002\u8BA9\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E0B\u73B0\u5728\u7684\u4EE3\u7801\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;">* Generated by go-doudou v2.5.8.</span></span>
<span class="line"><span style="color:#6A9955;">* You can edit it as your need.</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/brianvoe/gofakeit/v6&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/config&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;"> Helloworld = (*HelloworldImpl)(</span><span style="color:#569CD6;">nil</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloworldImpl</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	conf *config.Config</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (receiver *HelloworldImpl) </span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">_result</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">		Data </span><span style="color:#4EC9B0;">string</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;"> = gofakeit.</span><span style="color:#DCDCAA;">Struct</span><span style="color:#D4D4D4;">(&amp;_result)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> _result.Data, </span><span style="color:#569CD6;">nil</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">NewHelloworld</span><span style="color:#D4D4D4;">(conf *config.Config) *HelloworldImpl {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> &amp;HelloworldImpl{</span></span>
<span class="line"><span style="color:#D4D4D4;">		conf: conf,</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>\u6211\u4EEC\u91C7\u7528<a href="github.com/brianvoe/gofakeit">gofakeit</a> \u8FD9\u4E2A\u5E93\u5E2E\u6211\u4EEC\u751F\u6210\u5047\u6570\u636E\u3002\u6211\u4EEC\u9996\u5148\u9700\u8981\u5220\u6389\u8FD9\u4E9B\u4EE3\u7801\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;">* Generated by go-doudou v2.5.8.</span></span>
<span class="line"><span style="color:#6A9955;">* You can edit it as your need.</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/config&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;"> Helloworld = (*HelloworldImpl)(</span><span style="color:#569CD6;">nil</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloworldImpl</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	conf *config.Config</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (receiver *HelloworldImpl) </span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> fmt.</span><span style="color:#DCDCAA;">Sprintf</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Hello </span><span style="color:#9CDCFE;">%s</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">, greeting), </span><span style="color:#569CD6;">nil</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">NewHelloworld</span><span style="color:#D4D4D4;">(conf *config.Config) *HelloworldImpl {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> &amp;HelloworldImpl{</span></span>
<span class="line"><span style="color:#D4D4D4;">		conf: conf,</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>\u6211\u4EEC\u5220\u6389\u4E86\u7B2C21~25\u884C\u7684\u4EE3\u7801\uFF0C\u66FF\u6362\u6210\u4E86<code>return fmt.Sprintf(&quot;Hello %s&quot;, greeting), nil</code>\u3002\u6211\u4EEC\u518D\u6D4B\u4E00\u4E0B\u6548\u679C\u3002 <img src="`+u+`" alt="greeting1"> \u7528go-doudou\u5199RESTful\u63A5\u53E3\u662F\u4E0D\u662F\u975E\u5E38\u7B80\u5355\uFF01</p><h3 id="grpc\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#grpc\u670D\u52A1" aria-hidden="true">#</a> gRPC\u670D\u52A1</h3><p>\u4E0B\u9762\u6211\u4EEC\u6765\u7ED9\u9879\u76EE\u52A0\u4E0AgRPC\u670D\u52A1\u3002gRPC\u662Fgo\u751F\u6001\u4E2D\u6700\u6D41\u884C\u7684rpc\u6846\u67B6\u3002gRPC\u91C7\u7528<code>http2</code>\u4F5C\u4E3A\u7F51\u7EDC\u534F\u8BAE\u52A0<code>protobuf</code>\u4F5C\u4E3A\u6D88\u606F\u4F53\u5E8F\u5217\u5316\u65B9\u6848\u3002\u5F00\u53D1gRPC\u670D\u52A1\u7684\u4E00\u822C\u6D41\u7A0B\u5927\u6982\u662F\u4EE5\u4E0B\u51E0\u6B65\uFF1A</p><ol><li>\u5148\u6309\u7167<code>protobuf</code>\u7684\u8BED\u6CD5\u5728<code>.proto</code>\u540E\u7F00\u7684\u6587\u4EF6\u91CC\u5B9A\u4E49<code>message</code>\u548C<code>service</code></li><li>\u518D\u6267\u884C\u7C7B\u4F3C<code>protoc --proto_path=. --go_out=. --go_opt=paths=source_relative --go-grpc_out=. --go-grpc_opt=paths=source_relative transport/grpc/helloworld.proto</code>\u8FD9\u6837\u7684\u547D\u4EE4\u751F\u6210\u670D\u52A1\u7AEF\u548C\u5BA2\u6237\u7AEF\u6253\u6869\u4EE3\u7801</li><li>\u518D\u81EA\u5DF1\u5B9A\u4E49\u7ED3\u6784\u4F53\u548C\u65B9\u6CD5\u5B9E\u73B0\u7C7B\u4F3C<code>pb.HelloworldServiceServer</code>\u8FD9\u6837\u7684\u63A5\u53E3\uFF0C\u4ECE\u800C\u5B9E\u73B0\u4E1A\u52A1\u903B\u8F91</li><li>\u6700\u540E\u5728<code>main</code>\u51FD\u6570\u91CC\u52A0\u4E0A\u7C7B\u4F3C</li></ol><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">...</span></span>
<span class="line"><span style="color:#9CDCFE;">grpcServer</span><span style="color:#D4D4D4;"> := grpc.</span><span style="color:#DCDCAA;">NewServer</span><span style="color:#D4D4D4;">(opts...)</span></span>
<span class="line"><span style="color:#D4D4D4;">pb.</span><span style="color:#DCDCAA;">RegisterHelloworldServiceServer</span><span style="color:#D4D4D4;">(grpcServer, svc)</span></span>
<span class="line"><span style="color:#D4D4D4;">grpcServer.</span><span style="color:#DCDCAA;">Serve</span><span style="color:#D4D4D4;">(lis)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8FD9\u6837\u7684\u4EE3\u7801\u6765\u542F\u52A8gRPC\u670D\u52A1\u3002</p><p>\u5982\u679C\u91C7\u7528<code>go-doudou</code>\u4F5C\u4E3A\u5F00\u53D1\u6846\u67B6\u6765\u5F00\u53D1gRPC\u670D\u52A1\u7684\u8BDD\uFF0C\u4F1A\u7B80\u5355\u5F88\u591A\u3002\u4EE5\u4E0A\u6587\u7684<code>Helloworld</code>\u9879\u76EE\u4E3A\u4F8B\uFF0C\u53EA\u9700\u4E24\u6B65\uFF1A</p><h4 id="\u751F\u6210grpc\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u751F\u6210grpc\u4EE3\u7801" aria-hidden="true">#</a> \u751F\u6210gRPC\u4EE3\u7801</h4><p>\u5728\u9879\u76EE\u6839\u8DEF\u5F84\u4E0B\u6267\u884C\u547D\u4EE4<code>go-doudou svc grpc</code>\uFF0C\u8BE5\u547D\u4EE4\u76F4\u63A5\u4E3A\u6211\u4EEC\u751F\u6210\u4E86<code>.proto</code>\u540E\u7F00\u7684\u6587\u4EF6\uFF0C\u670D\u52A1\u7AEF\u548C\u5BA2\u6237\u7AEF\u6253\u6869\u4EE3\u7801\uFF0C\u4EE5\u53CA<code>svcimpl.go</code>\u6587\u4EF6\u91CC\u7684<code>pb.HelloworldServiceServer</code>\u63A5\u53E3\u7684\u5B9E\u73B0\u65B9\u6CD5\uFF0C\u53EA\u7B49\u6211\u4EEC\u5728\u751F\u6210\u7684\u65B9\u6CD5\u91CC\u5B9E\u73B0\u5177\u4F53\u7684\u4E1A\u52A1\u903B\u8F91\u5373\u53EF\u3002</p><p>\u6B64\u65F6\u7684\u6587\u4EF6\u5939\u7ED3\u6784\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#DCDCAA;">.</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 Dockerfile</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 client</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u251C\u2500\u2500 client.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u251C\u2500\u2500 clientproxy.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 iclient.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 cmd</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 config</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 config.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 db</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 db.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.sum</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.json</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svc.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svcimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 transport</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u251C\u2500\u2500 grpc</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2502\xA0\xA0 \u251C\u2500\u2500 annotation.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2502\xA0\xA0 \u251C\u2500\u2500 helloworld.pb.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2502\xA0\xA0 \u251C\u2500\u2500 helloworld.proto</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2502\xA0\xA0 \u2514\u2500\u2500 helloworld_grpc.pb.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 httpsrv</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u251C\u2500\u2500 handler.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u251C\u2500\u2500 handlerimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u2514\u2500\u2500 middleware.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2514\u2500\u2500 vo</span></span>
<span class="line"><span style="color:#D4D4D4;">    \u2514\u2500\u2500 vo.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>\u6211\u4EEC\u518D\u770B\u4E00\u4E0B<code>svcimpl.go</code>\u6587\u4EF6\uFF0C\u53EF\u4EE5\u770B\u5230\u591A\u4E86\u4E00\u4E2A<code>GreetingRpc</code>\u65B9\u6CD5\uFF0C\u4ECE\u800C\u4F7F<code>HelloworldImpl</code>\u7ED3\u6784\u4F53\u5B9E\u73B0\u4E86<code>pb.HelloworldServiceServer</code>\u63A5\u53E3\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (receiver *HelloworldImpl) </span><span style="color:#DCDCAA;">GreetingRpc</span><span style="color:#D4D4D4;">(ctx context.Context, request *pb.GreetingRpcRequest) (*pb.GreetingRpcResponse, </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#6A9955;">//TODO implement me</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#DCDCAA;">panic</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;implement me&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8FD9\u91CC\u6211\u4EEC\u53EF\u4EE5\u590D\u7528RESTful\u670D\u52A1\u7528\u5230\u7684<code>Greeting</code>\u65B9\u6CD5\uFF0C\u4FEE\u6539\u540E\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (receiver *HelloworldImpl) </span><span style="color:#DCDCAA;">GreetingRpc</span><span style="color:#D4D4D4;">(ctx context.Context, request *pb.GreetingRpcRequest) (*pb.GreetingRpcResponse, </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">data</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">err</span><span style="color:#D4D4D4;"> := receiver.</span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx, request.Greeting)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> err != </span><span style="color:#569CD6;">nil</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">nil</span><span style="color:#D4D4D4;">, err</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> &amp;pb.GreetingRpcResponse{</span></span>
<span class="line"><span style="color:#D4D4D4;">		Data: data,</span></span>
<span class="line"><span style="color:#D4D4D4;">	}, </span><span style="color:#569CD6;">nil</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="\u4FEE\u6539main\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539main\u51FD\u6570" aria-hidden="true">#</a> \u4FEE\u6539main\u51FD\u6570</h4><p>\u5728<code>cmd</code>\u6587\u4EF6\u5939\u91CC\u7684<code>main.go</code>\u6587\u4EF6\u7684<code>main</code>\u51FD\u6570\u91CC\u52A0\u5165\u4EE5\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">go</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">grpcServer</span><span style="color:#D4D4D4;"> := ddgrpc.</span><span style="color:#DCDCAA;">NewGrpcServer</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">			grpc.</span><span style="color:#DCDCAA;">StreamInterceptor</span><span style="color:#D4D4D4;">(grpc_middleware.</span><span style="color:#DCDCAA;">ChainStreamServer</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_ctxtags.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_opentracing.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_prometheus.StreamServerInterceptor,</span></span>
<span class="line"><span style="color:#D4D4D4;">				tags.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(tags.</span><span style="color:#DCDCAA;">WithFieldExtractor</span><span style="color:#D4D4D4;">(tags.CodeGenRequestFieldExtractor)),</span></span>
<span class="line"><span style="color:#D4D4D4;">				logging.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(grpczerolog.</span><span style="color:#DCDCAA;">InterceptorLogger</span><span style="color:#D4D4D4;">(logger.Logger)),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_recovery.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">			)),</span></span>
<span class="line"><span style="color:#D4D4D4;">			grpc.</span><span style="color:#DCDCAA;">UnaryInterceptor</span><span style="color:#D4D4D4;">(grpc_middleware.</span><span style="color:#DCDCAA;">ChainUnaryServer</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_ctxtags.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_opentracing.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_prometheus.UnaryServerInterceptor,</span></span>
<span class="line"><span style="color:#D4D4D4;">				tags.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(tags.</span><span style="color:#DCDCAA;">WithFieldExtractor</span><span style="color:#D4D4D4;">(tags.CodeGenRequestFieldExtractor)),</span></span>
<span class="line"><span style="color:#D4D4D4;">				logging.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(grpczerolog.</span><span style="color:#DCDCAA;">InterceptorLogger</span><span style="color:#D4D4D4;">(logger.Logger)),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_recovery.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">			)),</span></span>
<span class="line"><span style="color:#D4D4D4;">		)</span></span>
<span class="line"><span style="color:#D4D4D4;">		pb.</span><span style="color:#DCDCAA;">RegisterHelloworldServiceServer</span><span style="color:#D4D4D4;">(grpcServer, svc)</span></span>
<span class="line"><span style="color:#D4D4D4;">		grpcServer.</span><span style="color:#DCDCAA;">Run</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;">	}()</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>\u7136\u540E\u5728<code>go.mod</code>\u6587\u4EF6\u91CC\u52A0\u5165\u4EE5\u4E0B\u4F9D\u8D56\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">github.com/grpc-ecosystem/go-grpc-middleware v1.0.1-0.20190118093823-f849b5445de4
github.com/grpc-ecosystem/go-grpc-middleware/providers/zerolog/v2 v2.0.0-rc.2
github.com/grpc-ecosystem/go-grpc-middleware/v2 v2.0.0-rc.2
github.com/grpc-ecosystem/go-grpc-prometheus v1.2.0
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u6267\u884C\u547D\u4EE4<code>go mod tidy</code>\u540E\uFF0C\u5B8C\u6574\u7684<code>main.go</code>\u6587\u4EF6\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;">* Generated by go-doudou v2.5.8.</span></span>
<span class="line"><span style="color:#6A9955;">* You can edit it as your need.</span></span>
<span class="line"><span style="color:#6A9955;"> */</span></span>
<span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	grpc_middleware </span><span style="color:#CE9178;">&quot;github.com/grpc-ecosystem/go-grpc-middleware&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	grpczerolog </span><span style="color:#CE9178;">&quot;github.com/grpc-ecosystem/go-grpc-middleware/providers/zerolog/v2&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	grpc_recovery </span><span style="color:#CE9178;">&quot;github.com/grpc-ecosystem/go-grpc-middleware/recovery&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	grpc_ctxtags </span><span style="color:#CE9178;">&quot;github.com/grpc-ecosystem/go-grpc-middleware/tags&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	grpc_opentracing </span><span style="color:#CE9178;">&quot;github.com/grpc-ecosystem/go-grpc-middleware/tracing/opentracing&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/grpc-ecosystem/go-grpc-middleware/v2/interceptors/logging&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	grpc_prometheus </span><span style="color:#CE9178;">&quot;github.com/grpc-ecosystem/go-grpc-prometheus&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/go-doudou/v2/framework/grpcx&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/go-doudou/v2/framework/rest&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/go-doudou/v2/toolkit/zlogger&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	service </span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/config&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	pb </span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/transport/grpc&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/transport/httpsrv&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;google.golang.org/grpc&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">main</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">conf</span><span style="color:#D4D4D4;"> := config.</span><span style="color:#DCDCAA;">LoadFromEnv</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">svc</span><span style="color:#D4D4D4;"> := service.</span><span style="color:#DCDCAA;">NewHelloworld</span><span style="color:#D4D4D4;">(conf)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">go</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#9CDCFE;">grpcServer</span><span style="color:#D4D4D4;"> := grpcx.</span><span style="color:#DCDCAA;">NewGrpcServer</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">			grpc.</span><span style="color:#DCDCAA;">StreamInterceptor</span><span style="color:#D4D4D4;">(grpc_middleware.</span><span style="color:#DCDCAA;">ChainStreamServer</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_ctxtags.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_opentracing.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_prometheus.StreamServerInterceptor,</span></span>
<span class="line"><span style="color:#D4D4D4;">				logging.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(grpczerolog.</span><span style="color:#DCDCAA;">InterceptorLogger</span><span style="color:#D4D4D4;">(zlogger.Logger)),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_recovery.</span><span style="color:#DCDCAA;">StreamServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">			)),</span></span>
<span class="line"><span style="color:#D4D4D4;">			grpc.</span><span style="color:#DCDCAA;">UnaryInterceptor</span><span style="color:#D4D4D4;">(grpc_middleware.</span><span style="color:#DCDCAA;">ChainUnaryServer</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_ctxtags.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_opentracing.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_prometheus.UnaryServerInterceptor,</span></span>
<span class="line"><span style="color:#D4D4D4;">				logging.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(grpczerolog.</span><span style="color:#DCDCAA;">InterceptorLogger</span><span style="color:#D4D4D4;">(zlogger.Logger)),</span></span>
<span class="line"><span style="color:#D4D4D4;">				grpc_recovery.</span><span style="color:#DCDCAA;">UnaryServerInterceptor</span><span style="color:#D4D4D4;">(),</span></span>
<span class="line"><span style="color:#D4D4D4;">			)),</span></span>
<span class="line"><span style="color:#D4D4D4;">		)</span></span>
<span class="line"><span style="color:#D4D4D4;">		pb.</span><span style="color:#DCDCAA;">RegisterHelloworldServiceServer</span><span style="color:#D4D4D4;">(grpcServer, svc)</span></span>
<span class="line"><span style="color:#D4D4D4;">		grpcServer.</span><span style="color:#DCDCAA;">Run</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;">	}()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">handler</span><span style="color:#D4D4D4;"> := httpsrv.</span><span style="color:#DCDCAA;">NewHelloworldHandler</span><span style="color:#D4D4D4;">(svc)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">srv</span><span style="color:#D4D4D4;"> := rest.</span><span style="color:#DCDCAA;">NewRestServer</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;">	srv.</span><span style="color:#DCDCAA;">AddRoute</span><span style="color:#D4D4D4;">(httpsrv.</span><span style="color:#DCDCAA;">Routes</span><span style="color:#D4D4D4;">(handler)...)</span></span>
<span class="line"><span style="color:#D4D4D4;">	srv.</span><span style="color:#DCDCAA;">Run</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p>\u6211\u4EEC\u91CD\u542F\u670D\u52A1\u770B\u4E00\u4E0B\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 go-doudou svc run</span></span>
<span class="line"><span style="color:#D4D4D4;">2022/11/06 22:01:24 maxprocs: Leaving GOMAXPROCS=16: CPU quota undefined</span></span>
<span class="line"><span style="color:#D4D4D4;">                           _                    _</span></span>
<span class="line"><span style="color:#D4D4D4;">                          | |                  | |</span></span>
<span class="line"><span style="color:#D4D4D4;">  __ _   ___   ______   __| |  ___   _   _   __| |  ___   _   _</span></span>
<span class="line"><span style="color:#D4D4D4;"> / _</span><span style="color:#CE9178;">\` </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">______</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _\`</span><span style="color:#D4D4D4;"> | / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">| | | | / _</span><span style="color:#CE9178;">\` </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">        </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> (_) </span><span style="color:#D4D4D4;">||</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_, </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/          </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/  </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">__/  </span><span style="color:#D7BA7D;">\\_</span><span style="color:#CE9178;">_,_</span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">  __/ </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">___/</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF ================ Registered Routes ================</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF ================ Registered Services ================</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF +------------------------------------------+----------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">                 SERVICE                  </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">         RPC          </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF +------------------------------------------+----------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> helloworld.HelloworldService             </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GreetingRpc          </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> grpc.reflection.v1alpha.ServerReflection </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> ServerReflectionInfo </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF +------------------------------------------+----------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF ===================================================</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF Grpc server is listening at [::]:50051</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF Grpc server started </span><span style="color:#C586C0;">in</span><span style="color:#CE9178;"> 5.905894ms</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">         NAME         </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> METHOD </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;">         PATTERN         </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> Greeting             </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> POST   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /greeting               </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDoc               </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/doc          </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetOpenAPI           </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/openapi.json </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> Prometheus           </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/prometheus   </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetConfig            </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/config       </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetStatsvizWs        </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/statsviz/ws  </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetStatsviz          </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /go-doudou/statsviz/</span><span style="color:#D4D4D4;">*</span><span style="color:#CE9178;">   </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofCmdline </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/cmdline    </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofProfile </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/profile    </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofSymbol  </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/symbol     </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofTrace   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/trace      </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GetDebugPprofIndex   </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> GET    </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> /debug/pprof/</span><span style="color:#D4D4D4;">*</span><span style="color:#CE9178;">          </span><span style="color:#D4D4D4;">|</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF +----------------------+--------+-------------------------+</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF ===================================================</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF Http server is listening at :6060</span></span>
<span class="line"><span style="color:#CE9178;">2022-11-06 22:01:24 INF Http server started </span><span style="color:#C586C0;">in</span><span style="color:#CE9178;"> 1.450698ms</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>\u65E5\u5FD7\u8F93\u51FA\u6709\u70B9\u4E71\uFF0C\u662F\u56E0\u4E3AgRPC\u670D\u52A1\u548CRESTful\u670D\u52A1\u5206\u522B\u5728\u4E0D\u540C\u7684goroutine\u4E2D\u8FD0\u884C\u3002\u5982\u679C\u53EA\u542F\u52A8gRPC\u670D\u52A1\u7684\u8BDD\uFF0C\u65E5\u5FD7\u8F93\u51FA\u4F1A\u66F4\u6E05\u6670\u3002</p><p>\u5F53\u6211\u4EEC\u770B\u5230<code>Grpc server is listening at [::]:50051</code>\u5C31\u8BF4\u660EgRPC\u670D\u52A1\u542F\u52A8\u6210\u529F\u4E86\u3002</p><h3 id="\u6D4B\u8BD5grpc" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5grpc" aria-hidden="true">#</a> \u6D4B\u8BD5gRPC</h3><p>\u53EF\u4EE5\u7528postman\u6D4B\u8BD5gRPC\u670D\u52A1\uFF0C\u4F46\u8FD9\u91CC\u4E0D\u6253\u7B97\u8BE6\u7EC6\u4ECB\u7ECD\u4E86\u3002</p><p><img src="`+b+'" alt="postmangrpc"></p>',39),bs=s("\u8FD9\u91CC\u91C7\u7528\u77E5\u540DgRPC\u5BA2\u6237\u7AEF\u5DE5\u5177"),ys=n("code",null,"evans",-1),ms=s("\u6765\u6D4B\u8BD5\u3002\u8BE6\u7EC6\u4ECB\u7ECD\u8BF7\u8DF3\u8F6C"),gs={href:"https://github.com/ktr0731/evans",target:"_blank",rel:"noopener noreferrer"},Cs=s("https://github.com/ktr0731/evans"),hs=s("\u3002"),Es=l(`<p>\u8BF7\u9605\u8BFB\u4EE3\u7801\u4E2D\u7684\u6CE8\u91CA\u8BF4\u660E\uFF0C\u4E86\u89E3\u7528\u6CD5\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># 50051\u662Fgrpc server\u76D1\u542C\u7684\u9ED8\u8BA4\u7AEF\u53E3\u53F7</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 evans -r repl -p 50051</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">  ______</span></span>
<span class="line"><span style="color:#D4D4D4;"> |  ____|</span></span>
<span class="line"><span style="color:#D4D4D4;"> | |__    __   __   __ _   _ __    ___</span></span>
<span class="line"><span style="color:#D4D4D4;"> |  __|   </span><span style="color:#D7BA7D;">\\ \\ </span><span style="color:#D4D4D4;">/ /  / _. | | </span><span style="color:#CE9178;">&#39;_ \\  / __|</span></span>
<span class="line"><span style="color:#CE9178;"> | |____   \\ V /  | (_| | | | | | \\__ \\</span></span>
<span class="line"><span style="color:#CE9178;"> |______|   \\_/    \\__,_| |_| |_| |___/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9178;"> more expressive universal gRPC client</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9178;"># \u67E5\u770Bgrpc server\u63D0\u4F9B\u4E86\u54EA\u4E9B\u670D\u52A1\u548Crpc\u63A5\u53E3</span></span>
<span class="line"><span style="color:#CE9178;">helloworld.HelloworldService@127.0.0.1:50051&gt; show service</span></span>
<span class="line"><span style="color:#CE9178;">+-------------------+-------------+--------------------+---------------------+</span></span>
<span class="line"><span style="color:#CE9178;">|      SERVICE      |     RPC     |    REQUEST TYPE    |    RESPONSE TYPE    |</span></span>
<span class="line"><span style="color:#CE9178;">+-------------------+-------------+--------------------+---------------------+</span></span>
<span class="line"><span style="color:#CE9178;">| HelloworldService | GreetingRpc | GreetingRpcRequest | GreetingRpcResponse |</span></span>
<span class="line"><span style="color:#CE9178;">+-------------------+-------------+--------------------+---------------------+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9178;"># \u5207\u6362\u5230HelloworldService\u670D\u52A1\u4E0B\uFF0C\u4E4B\u540E\u7684call\u547D\u4EE4\u540E\u9762\u53EF\u4EE5\u76F4\u63A5\u8F93\u5165rpc\u540D\u79F0\u4E86</span></span>
<span class="line"><span style="color:#CE9178;">helloworld.HelloworldService@127.0.0.1:50051&gt; service HelloworldService</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9178;"># \u8C03\u7528GreetingRpc\u63A5\u53E3\uFF0C\u5F00\u542F\u4EA4\u4E92\u5F0F\u7EC8\u7AEF\uFF0C\u6839\u636E\u63D0\u793A\u8F93\u5165\u53C2\u6570\uFF0C\u8F93\u51FA\u8FD4\u56DE\u503C</span></span>
<span class="line"><span style="color:#CE9178;">helloworld.HelloworldService@127.0.0.1:50051&gt; call GreetingRpc</span></span>
<span class="line"><span style="color:#CE9178;">greeting (TYPE_STRING) =&gt; Jack</span></span>
<span class="line"><span style="color:#CE9178;">{</span></span>
<span class="line"><span style="color:#CE9178;">  &quot;data&quot;: &quot;Hello Jack&quot;</span></span>
<span class="line"><span style="color:#CE9178;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CE9178;"># \u9000\u51FAevans</span></span>
<span class="line"><span style="color:#CE9178;">helloworld.HelloworldService@127.0.0.1:50051&gt; exit</span></span>
<span class="line"><span style="color:#CE9178;">Good Bye :)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>\u6211\u4EEC\u8F93\u5165&quot;Jack&quot;\u540E\uFF0C\u8F93\u51FA\u4E86&quot;Hello Jack&quot;\uFF0C\u8BC1\u660EgRPC\u670D\u52A1\u53EF\u4EE5\u8DD1\u901A\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230gRPC\u670D\u52A1\u6240\u5728\u7684\u547D\u4EE4\u884C\u7EC8\u7AEF\u7684\u6807\u7B7E\u9875\u4E2D\u4E5F\u8F93\u51FA\u4E86\u4E00\u884C\u65E5\u5FD7\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">2022-11-06 22:02:54 INF finished server unary call grpc.code=OK grpc.method=GreetingRpc grpc.method_type=unary grpc.service=helloworld.HelloworldService grpc.start_time=2022-11-06T22:02:54+08:00 grpc.time_ms=0.026 kind=server system=grpc</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="k8s\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#k8s\u90E8\u7F72" aria-hidden="true">#</a> K8S\u90E8\u7F72</h3>`,6),vs=s("\u6709\u5F88\u591A\u79CD\u90E8\u7F72go\u8BED\u8A00\u7684http\u670D\u52A1\u7684\u65B9\u6848\u3002\u6211\u4EEC\u8FD9\u91CC\u5C06"),_s=n("code",null,"helloworld",-1),fs=s("\u670D\u52A1\u90E8\u7F72\u5230k8s\u4E0A\u3002\u8BF7\u53C2\u8003"),As=s("Deployment"),ks=s(" \u7AE0\u8282\u6765\u4E86\u89E3\u66F4\u591A\u3002"),ws=l(`<h4 id="\u6784\u5EFAdocker\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u6784\u5EFAdocker\u955C\u50CF" aria-hidden="true">#</a> \u6784\u5EFAdocker\u955C\u50CF</h4><p>\u6267\u884C\u547D\u4EE4<code>go-doudou svc push -r wubin1989</code>\uFF0C\u522B\u5FD8\u8BB0\u5C06<code>wubin1989</code>\u6539\u6210\u4F60\u81EA\u5DF1\u7684\u8FDC\u7A0B\u955C\u50CF\u4ED3\u5E93\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">...</span></span>
<span class="line"><span style="color:#D4D4D4;">v20221004215355: digest: sha256:31d4242cc6d27990e7cf562c285bd164c10914bceddc6a23068a52aa43c217be size: 1360</span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-10-04 22:01:37] image wubin1989/helloworld:v20221004215355 has been pushed successfully </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-10-04 22:01:37] k8s yaml has been created/updated successfully. execute </span><span style="color:#DCDCAA;">command</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;go-doudou svc deploy&#39;</span><span style="color:#D4D4D4;"> to deploy service helloworld to k8s cluster </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5F53\u8F93\u51FA\u6700\u540E\u4E09\u884C\u5185\u5BB9\uFF0C\u5373\u8868\u793A\u955C\u50CF\u5DF2\u7ECF\u6210\u529F\u6253\u5305\u5E76\u63A8\u5230\u4E86\u8FDC\u7A0B\u4ED3\u5E93\uFF0C\u540C\u65F6\u4F60\u53EF\u4EE5\u770B\u5230\u591A\u4E86\u4E24\u4E2Ayaml\u683C\u5F0F\u7684\u6587\u4EF6\uFF1A<code>helloworld_deployment.yaml</code>\u548C<code>helloworld_statefulset.yaml</code></p><ul><li><code>helloworld_deployment.yaml</code>: \u7528\u4E8E\u90E8\u7F72\u65E0\u72B6\u6001\u7684\u670D\u52A1</li><li><code>helloworld_statefulset.yaml</code>: \u7528\u4E8E\u90E8\u7F72\u6709\u72B6\u6001\u7684\u670D\u52A1</li></ul><h4 id="\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72" aria-hidden="true">#</a> \u90E8\u7F72</h4>`,6),xs={class:"custom-container tip"},Is=n("p",{class:"custom-container-title"},"\u63D0\u793A",-1),Ss=s("\u5982\u679C\u4F60\u8FD8\u6CA1\u6709\u5B89\u88C5Docker for Desktop\uFF0C\u8BF7\u4ECE"),Gs={href:"https://www.docker.com/products/docker-desktop",target:"_blank",rel:"noopener noreferrer"},qs=s("https://www.docker.com/products/docker-desktop"),Fs=s(" \u4E0B\u8F7D\u5B89\u88C5\u3002\u5982\u679C\u4F60\u5BF9docker\u548Ck8s\u4E0D\u4E86\u89E3\uFF0C\u8BF7\u53C2\u8003"),Rs={href:"https://docs.docker.com/get-started/overview/",target:"_blank",rel:"noopener noreferrer"},Ns=s("\u5B98\u65B9\u6587\u6863"),js=s("\u3002"),Ps=l(`<p>\u5F53\u6267\u884C\u547D\u4EE4<code>go-doudou svc deploy</code>\u65F6\uFF0C\u9ED8\u8BA4\u91C7\u7528<code>helloworld_statefulset.yaml</code>\u6587\u4EF6\u6765\u90E8\u7F72\u6709\u72B6\u6001\u7684\u5E94\u7528\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc deploy</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u4E5F\u53EF\u4EE5\u901A\u8FC7\u52A0<code>-k</code>\u9009\u9879\uFF0C\u540E\u9762\u8DDF\u6587\u4EF6\u8DEF\u5F84\uFF0C\u90E8\u7F72\u65E0\u72B6\u6001\u670D\u52A1\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc deploy -k helloworld_deployment.yaml</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u7136\u540E\u6267\u884C\u547D\u4EE4<code>kubectl get pods</code>\uFF0C\u53EF\u4EE5\u770B\u5230\u6211\u4EEC\u7684\u670D\u52A1\u5DF2\u7ECF\u5728\u8FD0\u884C\u4E86\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 kubectl get pods    </span></span>
<span class="line"><span style="color:#D4D4D4;">NAME                       READY   STATUS    RESTARTS   AGE</span></span>
<span class="line"><span style="color:#D4D4D4;">helloworld-statefulset-0   1/1     Running   0          11m</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u6B64\u65F6\uFF0C\u4F60\u8FD8\u4E0D\u80FD\u901A\u8FC7<code>http://localhost:6060</code>\u8BBF\u95EE\u670D\u52A1\u3002\u9700\u8981\u5148\u914D\u7F6E\u4E00\u4E2A\u7AEF\u53E3\u8F6C\u53D1\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> POD_NAME=</span><span style="color:#CE9178;">$(kubectl get pods --namespace default -l &quot;app=helloworld&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u7136\u540E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">kubectl port-forward --namespace default </span><span style="color:#9CDCFE;">$POD_NAME</span><span style="color:#D4D4D4;"> 6060:6060 </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u4F60\u770B\u5230\u547D\u4EE4\u884C\u7EC8\u7AEF\u6709\u5982\u4E0B\u5185\u5BB9\u8F93\u51FA\uFF0C\u5C31\u53EF\u4EE5\u7528postman\u6D4B\u8BD5\u63A5\u53E3\u4E86\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 </span><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> POD_NAME=</span><span style="color:#CE9178;">$(kubectl get pods --namespace default -l &quot;app=helloworld&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 kubectl port-forward --namespace default </span><span style="color:#9CDCFE;">$POD_NAME</span><span style="color:#D4D4D4;"> 6060:6060                                               </span></span>
<span class="line"><span style="color:#D4D4D4;">Forwarding from 127.0.0.1:6060 -&gt; 6060</span></span>
<span class="line"><span style="color:#D4D4D4;">Forwarding from [::1]:6060 -&gt; 6060</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="\u5173\u95ED\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u5173\u95ED\u670D\u52A1" aria-hidden="true">#</a> \u5173\u95ED\u670D\u52A1</h4><p>\u6267\u884C\u547D\u4EE4<code>go-doudou svc shutdown</code>\u53EF\u4EE5\u5173\u95ED\u670D\u52A1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc shutdown</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u518D\u6B21\u6267\u884C\u547D\u4EE4<code>kubectl get pods</code>\uFF0C\u53EF\u4EE5\u770B\u5230\u670D\u52A1\u5DF2\u7ECF\u4E0B\u7EBF\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 kubectl get pods                                                                                             </span></span>
<span class="line"><span style="color:#D4D4D4;">No resources found </span><span style="color:#C586C0;">in</span><span style="color:#D4D4D4;"> default namespace.</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,17);function Hs(Ts,Bs){const p=o("ExternalLinkIcon"),e=o("RouterLink");return c(),t(D,null,[m,n("p",null,[g,n("a",C,[h,a(p)]),E]),v,n("ul",null,[n("li",null,[_,n("a",f,[A,a(p)]),k])]),w,n("ul",null,[n("li",null,[x,I,S,n("a",G,[q,a(p)]),F,n("a",R,[N,a(p)]),j,P,n("a",H,[T,a(p)]),B])]),O,n("div",z,[U,n("p",null,[M,n("a",$,[L,a(p)]),Y])]),V,n("p",null,[W,J,K,X,Q,Z,ss,ns,a(e,{to:"/zh/guide/idl.html"},{default:r(()=>[as]),_:1}),ls]),ps,n("ul",null,[es,os,n("li",null,[rs,cs,n("a",ts,[Ds,a(p)]),is]),us]),ds,n("p",null,[bs,ys,ms,n("a",gs,[Cs,a(p)]),hs]),Es,n("p",null,[vs,_s,fs,a(e,{to:"/zh/guide/deployment.html"},{default:r(()=>[As]),_:1}),ks]),ws,n("div",xs,[Is,n("p",null,[Ss,n("a",Gs,[qs,a(p)]),Fs,n("a",Rs,[Ns,a(p)]),js])]),Ps],64)}var Ms=d(y,[["render",Hs]]);export{Ms as default};
